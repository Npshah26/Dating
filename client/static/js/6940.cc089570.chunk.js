"use strict";(self.webpackChunkmatrimony=self.webpackChunkmatrimony||[]).push([[6940],{24146:(e,i,t)=>{t.d(i,{A:()=>l});var n=t(34535),s=t(96446),r=t(19252),o=t(70579);const a=(0,n.Ay)(s.A)((e=>{let{theme:i}=e;return`\n        padding: ${i.spacing(1)};\n`})),l=e=>{let{children:i}=e;return(0,o.jsx)(a,{className:"MuiPageTitle-wrapper",children:(0,o.jsx)(r.A,{maxWidth:"lg",children:i})})}},94786:(e,i,t)=>{t.d(i,{A:()=>s});t(65043);var n=t(70579);const s=e=>{const{title:i}=e;return(0,n.jsx)("div",{className:"spinner-container",children:(0,n.jsx)("div",{className:"loading-spinner"})})}},16940:(e,i,t)=>{t.r(i),t.d(i,{default:()=>ne});var n=t(65043),s=t(96446),r=t(68903),o=t(88911),a=t(22698),l=t(85865),d=t(33639),c=t(73216),u=t(35475),h=t(24146),m=t(53193),p=t(51292),x=t(71828),A=t(84511),v=t(93088),g=t(91449),j=t(11906),y=t(61319),f=t(73232),S=t(70579);const I=e=>{var i;let{title:t,progressBarLength:r,onNext:o,configData:a,currentStepId:d,userInfo:c,setUserInfo:u}=e;const[h,I]=n.useState(c.profileForId||"");console.log("profile",h,c.profileForId);const[b,C]=n.useState(c.gender||"select"),[k,T]=n.useState(a.genderList),[N,w]=n.useState(""),[D,E]=n.useState(""),[L,O]=n.useState(null),{showSnackBar:B,SnackbarComponent:P}=(0,f.d)(),[W,z]=n.useState(""),M=(null===(i=t.find((e=>e.id===d)))||void 0===i?void 0:i.name)||"";n.useEffect((()=>{if(c.profileForId){const e=a.profileForList.find((e=>e.id===c.profileForId));e&&(I(e.name),C(e.gender||""),C(c.gender),console.log("Selected Gender:",e.gender),"Male"===e.gender?T(a.genderList.filter((e=>"Female"!==e))):"Female"===e.gender?T(a.genderList.filter((e=>"Male"!==e))):T(a.genderList))}}),[c.profileForId,a]);return(0,S.jsx)(s.A,{children:(0,S.jsxs)(y.A,{className:"container",children:[(0,S.jsx)(l.A,{variant:"h3",className:"title",children:M}),(0,S.jsx)(s.A,{className:"progress-bar-container",children:(0,S.jsx)(s.A,{className:"progress-bar",style:{width:r}})}),(0,S.jsxs)(m.A,{component:"fieldset",className:"profile-control",children:[(0,S.jsx)(p.A,{component:"legend",children:"This Profile is for *"}),(0,S.jsx)(x.A,{color:"primary",value:h,exclusive:!0,onChange:(e,i)=>{console.log("function callll--\x3e",i);const t=i;let n="";if(null!==i){I(i),i&&w("");const e=a.profileForList.find((e=>e.name==i));e?e.gender?(C(e.gender),n=e.gender,"Male"==e.gender?(T(a.genderList.filter((e=>"Female"!==e))),E("")):"Female"==e.gender&&(T(a.genderList.filter((e=>"Male"!==e))),E(""))):(console.log("exucution"),C(""),T(a.genderList)):(C(""),T(a.genderList))}u((e=>({...e,profileForId:t,gender:n})))},"aria-label":"Profile For",children:a.profileForList.map((e=>(0,S.jsx)(A.A,{value:e.name,"aria-label":e.name,children:e.name},e.id)))}),N&&(0,S.jsx)(l.A,{color:"error",align:"left",children:N})]}),(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Gender *"}),(0,S.jsxs)(v.A,{value:b||"",onChange:e=>{C(e.target.value);const i=e.target.value;e.target.value&&E(""),u((e=>({...e,gender:i})))},size:"small",children:[(0,S.jsx)(g.A,{value:"select",disabled:!0,children:"Please select your gender"}),k.map((e=>(0,S.jsx)(g.A,{value:e,children:e},e)))]}),D&&(0,S.jsx)(l.A,{color:"error",align:"left",children:D})]}),W&&(0,S.jsx)(l.A,{color:"error",children:W}),(0,S.jsxs)(s.A,{className:"navigation-buttons",children:[(0,S.jsx)(j.A,{variant:"contained",disabled:!0,children:"Back"}),(0,S.jsx)(j.A,{variant:"contained",onClick:()=>{let e=!1;if(h?w(""):(w("This Profile is for is required"),e=!0),b&&"select"!==b?E(""):(E("Gender is required"),e=!0),!e){const e=a.profileForList.find((e=>e.name==h));if(!e)return void console.error("Selected profile not found:",h);O(e),localStorage.setItem("profileForId",e.id.toString()),localStorage.setItem("gender",b),o()}},children:"Next"})]})]})})};var b=t(12110),C=t(81045),k=t(17392),T=t(67784),N=t(81673),w=t(60234),D=t(11633);const E=e=>{var i;let{title:t,progressBarLength:o,onBack:a,onNext:d,currentStepId:c,userInfo:u,setUserInfo:h}=e;const[x,A]=n.useState({firstName:u.firstName||"",middleName:u.middleName||"",lastName:u.lastName||"",email:u.email||"",mobileNumber:u.mobileNumber||"",dateOfBirth:u.dateOfBirth||""}),[y,I]=(0,n.useState)(!1),[E,L]=n.useState({firstName:!1,lastName:!1,email:!1,mobileNumber:!1,dateOfBirth:!1}),{showSnackBar:O,SnackbarComponent:B}=(0,f.d)(),[P,W]=(0,n.useState)(""),[z,M]=(0,n.useState)(""),[U,F]=n.useState(null),[q,$]=n.useState(null),[R,V]=(0,n.useState)(""),[J,_]=n.useState(u.imageUrl||null),G=(null===(i=t.find((e=>e.id===c)))||void 0===i?void 0:i.name)||"";n.useEffect((()=>()=>{J instanceof File&&URL.revokeObjectURL(URL.createObjectURL(J))}),[J]);const[Y,H]=n.useState("+91"),K=e=>{const{name:i,value:t}=e.target;if("mobileNumber"===i?t.length<=10&&A({...x,[i]:t}):A({...x,[i]:t}),L((e=>({...e,[i]:!1}))),"email"===i){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;""!==t&&L((i=>({...i,email:!e.test(t)})))}"mobileNumber"===i&&L((e=>({...e,mobileNumber:10!==t.length}))),h((e=>({...e,[i]:t})))};let Z,Q=JSON.parse(localStorage.getItem("Credentials"));Z=localStorage.getItem("isEdit"),(0,n.useEffect)((()=>{localStorage.getItem("isSignedUp")&&I(!0)}),[]),(0,n.useEffect)((()=>{null!==Q&&void 0!==Q&&Q.isDemoUser&&O("**Access Denied**\nWe're sorry, but you do not have permission to access this feature.")}),[]);return(0,S.jsxs)(s.A,{children:[Q.isDemoUser>0&&(0,S.jsx)(B,{}),(0,S.jsxs)(b.A,{className:"container",children:[(0,S.jsx)(l.A,{variant:"h3",className:"title",children:G}),(0,S.jsx)(s.A,{className:"progress-bar-container",children:(0,S.jsx)(s.A,{className:"progress-bar",style:{width:o}})}),(0,S.jsx)(s.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:2,mt:4},children:(0,S.jsxs)(s.A,{sx:{position:"relative",display:"inline-block"},children:[(0,S.jsx)(C.A,{src:J instanceof File?URL.createObjectURL(J):u.imageUrl||void 0,alt:"Selected Image",sx:{width:100,height:100}}),(0,S.jsx)("input",{accept:"image/*",style:{display:"none"},id:"upload-image",type:"file",onChange:async e=>{if(e.target.files&&e.target.files.length>0){const i=e.target.files[0];_(i);const t=new FileReader;t.onloadend=()=>{const e=t.result;V(e)},t.readAsDataURL(i),h((e=>({...e,imageUrl:i})))}}}),(0,S.jsx)("label",{htmlFor:"upload-image",children:(0,S.jsx)(k.A,{component:"span",sx:{position:"absolute",bottom:8,right:2,backgroundColor:"#5569ff",borderRadius:"50%",padding:.5,boxShadow:1,color:"white"},children:(0,S.jsx)(w.A,{})})})]})}),(0,S.jsx)(s.A,{sx:{width:"100%",mb:2,p:4},children:(0,S.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"First Name *"}),(0,S.jsx)(T.A,{name:"firstName",value:x.firstName,onChange:K,variant:"outlined",size:"small"}),E.firstName&&(0,S.jsx)(N.A,{error:!0,children:"First Name is required"})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Middle Name"}),(0,S.jsx)(T.A,{name:"middleName",value:x.middleName,onChange:K,variant:"outlined",size:"small"})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Last Name *"}),(0,S.jsx)(T.A,{name:"lastName",value:x.lastName,onChange:K,variant:"outlined",size:"small"}),E.lastName&&(0,S.jsx)(N.A,{error:!0,children:"Last Name is required"})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"email Address *"}),(0,S.jsx)(T.A,{name:"email",value:x.email,onChange:K,variant:"outlined",size:"small",type:"email"}),E.email&&P&&(0,S.jsx)(N.A,{error:!0,children:P})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Mobile Number *"}),(0,S.jsxs)(r.Ay,{container:!0,alignItems:"center",spacing:0,children:[(0,S.jsx)(r.Ay,{item:!0,xs:2,children:(0,S.jsxs)(v.A,{value:Y,onChange:e=>{H(e.target.value)},size:"small",variant:"outlined",sx:{width:"100%"},children:[(0,S.jsx)(g.A,{value:"+91",children:"+91"}),(0,S.jsx)(g.A,{value:"+1",children:"+1"}),(0,S.jsx)(g.A,{value:"+44",children:"+44"})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:10,children:(0,S.jsx)(T.A,{name:"mobileNumber",value:x.mobileNumber.slice(-10),onChange:K,variant:"outlined",size:"small",type:"tel",sx:{width:"100%"},inputProps:{maxLength:10}})})]}),E.mobileNumber&&z&&(0,S.jsx)(N.A,{error:!0,children:z})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Date of Birth *"}),(0,S.jsx)(T.A,{name:"dateOfBirth",value:x.dateOfBirth?(e=>{const i=new Date(e);return`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`})(x.dateOfBirth):"",onChange:K,variant:"outlined",size:"small",type:"date",InputLabelProps:{shrink:!0},inputProps:{max:(()=>{const e=new Date;e.setFullYear(e.getFullYear()-18);const i=String(e.getDate()).padStart(2,"0"),t=String(e.getMonth()+1).padStart(2,"0");return`${e.getFullYear()}-${t}-${i}`})()}}),E.dateOfBirth&&(0,S.jsx)(N.A,{error:!0,children:E.dateOfBirth&&"Date of Birth is required"})]})}),U&&(0,S.jsx)(l.A,{color:"success",children:U}),q&&(0,S.jsx)(l.A,{color:"error",children:q})]})}),(0,S.jsxs)(s.A,{className:"navigation-buttons",children:[(0,S.jsx)(j.A,{variant:"contained",onClick:a,children:"Back"}),(0,S.jsx)(j.A,{variant:"contained",onClick:"1"==Q.isDemoUser?d:async()=>{const e=`${Y}${x.mobileNumber}`,i={firstName:""===x.firstName,lastName:""===x.lastName,email:""===x.email,mobileNumber:""===x.mobileNumber,dateOfBirth:""===x.dateOfBirth};""===x.email?W("Email is required"):W(""),""===x.mobileNumber?M("Mobile number is required"):M(""),L(i);const t=Object.values(i).every((e=>!e)),n=localStorage.getItem("userId");if(t)try{if(!n||"undefined"===n){const e={email:x.email,contactNo:x.mobileNumber},i=await D.A.httpPost("/api/app/users/verifyEmailContact",e);if(i.message.includes("Email Already Exist"))return L((e=>({...e,email:!0}))),void W("Email already exists");if(i.message.includes("ContactNo Already Exist"))return L((e=>({...e,mobileNumber:!0}))),void M("Mobile number already exists")}let i,t,a;if(y||"false"!==Z)i=localStorage.getItem("userId"),t=localStorage.getItem("newToken"),a=localStorage.getItem("rtoken");else{var s,r,o;const e=await fetch("/api/app/users/signUp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"MatrimonyAndroid|"},body:JSON.stringify({email:x.email,contactNo:x.mobileNumber,password:"Demo@1234"})});if(!e.ok)throw new Error("Failed to sign up");const n=await e.json();if(console.log("Checking token",n.recordList[0]),i=null===(s=n.recordList[0])||void 0===s?void 0:s.id,t=null===(r=n.recordList[0])||void 0===r?void 0:r.token,a=null===(o=n.recordList[0])||void 0===o?void 0:o.refreshtoken,!i)throw new Error("User ID is missing from the sign-up response");localStorage.setItem("userId",i),localStorage.setItem("newToken",t),localStorage.setItem("rtoken",a),I(!0),localStorage.setItem("isSignedUp","true")}const l=localStorage.getItem("newToken"),c={id:i,screenNumber:1,gender:localStorage.getItem("gender"),profileForId:localStorage.getItem("profileForId"),token:l,...l?{}:{userId:i}};if(200!==(await D.A.httpPost("/api/admin/users/completeUserProfileV2",c,t,a)).status)throw new Error("Failed to update profile with Step 1 data");const h={id:i,screenNumber:2,firstName:x.firstName,middleName:x.middleName||null,lastName:x.lastName,contactNo:e,birthDate:x.dateOfBirth,email:x.email,token:l,...l?{}:{userId:i}};if(!(await fetch("/api/admin/users/completeUserProfileV2",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`MatrimonyAndroid|Bearer ${t}`,refreshtoken:`${a}`},body:JSON.stringify(h)})).ok)throw new Error("Failed to update profile with Step 2 data");if(J){const e={id:i,image:R||u.imageUrl,userId:i};if(200!=(await D.A.httpPost("/api/admin/appUsers/updateUserProfilePicV2",e,t,a)).status)throw new Error("Failed to upload image");console.log("Image uploaded successfully")}d()}catch(a){$(a.message)}},children:"Next"})]})]})]})};var L=t(78492),O=t(74605),B=t(14256),P=t(43845);const W=e=>{var i;let{title:t,progressBarLength:o,onBack:a,onNext:d,configData:c,currentStepId:u,userInfo:h,setUserInfo:x}=e;const[A,y]=(0,n.useState)(h.maritalStatusId||""),[I,C]=(0,n.useState)(h.haveChildren||""),[k,N]=(0,n.useState)(h.noOfChildren||""),[w,D]=(0,n.useState)([]),[E,W]=(0,n.useState)([]),[z,M]=n.useState(null),[U,F]=n.useState(null),[q,$]=(0,n.useState)(h.height||""),[R,V]=(0,n.useState)(h.weight||""),[J,_]=(0,n.useState)(h.haveSpecs||""),[G,Y]=(0,n.useState)(h.anyDisability||""),[H,K]=(0,n.useState)(h.bloodGroup||""),[Z,Q]=(0,n.useState)(h.complexion||""),[X,ee]=(0,n.useState)(h.bodyType||""),[ie,te]=(0,n.useState)(""),[ne,se]=(0,n.useState)(h.language||[]);console.log("Selected langages",ne,h.language);const[re,oe]=(0,n.useState)(h.eyeColor||""),[ae,le]=(0,n.useState)(h.aboutMe||""),{showSnackBar:de,SnackbarComponent:ce}=(0,f.d)(),[ue,he]=(0,n.useState)({}),me=(null===(i=t.find((e=>e.id===u)))||void 0===i?void 0:i.name)||"";(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token"),i=await fetch("/api/app/users/getMasterData",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error("Network response was not ok");const t=await i.json();console.log("Fetched data:",t),t&&t.recordList?(D(t.recordList.height||[]),W(t.recordList.weight||[])):console.error("Unexpected data format:",t)}catch(e){console.error("Error fetching data:",e)}})()}),[]),(0,n.useEffect)((()=>{null!==pe&&void 0!==pe&&pe.isDemoUser&&de("**Access Denied**\nWe're sorry, but you do not have permission to access this feature.")}),[]),console.log("have children",I),console.log(" children",h.haveChildren);let pe=JSON.parse(localStorage.getItem("Credentials"));const xe=(e,i)=>t=>{const n=t.target.value;e(n),he((e=>({...e,[t.target.name]:""}))),x((e=>({...e,[i]:n})))};(0,n.useEffect)((()=>{2!==A&&4!==A&&(C(""),N(""))}),[A]);const Ae=e=>{if(!ne.includes(e)){const i=[...ne,e];se(i),x((e=>({...e,language:i}))),he((e=>({...e,selectedLanguages:""})))}te("")};(0,n.useEffect)((()=>{h.language&&se(h.language)}),[h.language]);const ve=c.languages.filter((e=>e.toLowerCase().includes(ie.toLowerCase())));let ge;ge=localStorage.getItem("isEdit");return(0,S.jsxs)(s.A,{children:[pe.isDemoUser>0&&(0,S.jsx)(ce,{}),(0,S.jsxs)(b.A,{className:"container",children:[(0,S.jsx)(l.A,{variant:"h3",className:"title",children:me}),(0,S.jsx)(s.A,{className:"progress-bar-container",children:(0,S.jsx)(s.A,{className:"progress-bar",style:{width:o}})}),(0,S.jsx)(s.A,{sx:{width:"100%",mb:2,p:4},children:(0,S.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Marital Status *"}),(0,S.jsxs)(v.A,{name:"martialStatus",value:A,onChange:xe(y,"maritalStatusId"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your marital status"}),c.maritalStatus.filter((e=>"false"!=ge||"Married"!==e.name&&"Engaged"!==e.name)).map((e=>(0,S.jsx)(g.A,{value:e.id,children:e.name},e.id)))]}),ue.martialStatus&&(0,S.jsx)(l.A,{color:"error",children:ue.martialStatus})]})}),("2"==A||"4"==A)&&(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Do you have children? *"}),(0,S.jsxs)(L.A,{name:"hasChildren",value:I,onChange:e=>{const i=e.target.value;C(i),"1"!==i&&N(""),he((i=>({...i,[e.target.name]:""}))),x((e=>({...e,haveChildren:i})))},row:!0,children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Yes"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"Yes, if they live separate"}),(0,S.jsx)(O.A,{value:3,control:(0,S.jsx)(B.A,{}),label:"No"})]}),ue.hasChildren&&(0,S.jsx)(l.A,{color:"error",children:ue.hasChildren})]})}),"1"==I&&(0,S.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,S.jsx)(p.A,{children:"Number of Children *"}),(0,S.jsx)(T.A,{value:k,onChange:e=>{const i=e.target.value;N(e.target.value),he((i=>({...i,[e.target.name]:""}))),x((e=>({...e,noOfChildren:i})))},size:"small",fullWidth:!0,name:"numberOfChildren",placeholder:"Enter no. of children"}),ue.numberOfChildren&&(0,S.jsx)(l.A,{color:"error",children:ue.numberOfChildren})]}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Height (in cm) *"}),(0,S.jsxs)(v.A,{labelId:"height-label",name:"height",value:q,onChange:e=>{const i=e.target.value;$(e.target.value),he((e=>({...e,selectedHeight:""}))),x((e=>({...e,height:i})))},size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your height"}),w.map((e=>(0,S.jsx)(g.A,{value:e.id,children:e.name},e.id)))]}),ue.selectedHeight&&(0,S.jsx)(l.A,{color:"error",children:ue.selectedHeight})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Weight (in Kg) *"}),(0,S.jsxs)(v.A,{labelId:"weight-label",name:"weight",value:R,onChange:e=>{const i=e.target.value;V(e.target.value),he((e=>({...e,selectedWeight:""}))),x((e=>({...e,weight:i})))},size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your weight"}),E.length>0?E.map((e=>(0,S.jsx)(g.A,{value:e.name,children:e.name},e.id))):(0,S.jsx)(g.A,{disabled:!0,children:"No Weight Data"})]}),ue.selectedWeight&&(0,S.jsx)(l.A,{color:"error",children:ue.selectedWeight})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:3,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Specs/Lenses *"}),(0,S.jsxs)(L.A,{name:"specsLenses",value:J,onChange:e=>{const i=e.target.value;_(i),he((i=>({...i,[e.target.name]:""}))),x((e=>({...e,haveSpecs:i})))},row:!0,children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Yes"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"No"})]}),ue.specsLenses&&(0,S.jsx)(l.A,{color:"error",children:ue.specsLenses})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:3,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Any Disability *"}),(0,S.jsxs)(L.A,{name:"anyDisability",value:G,onChange:e=>{const i=e.target.value;Y(i),he((i=>({...i,[e.target.name]:""}))),x((e=>({...e,anyDisability:i})))},row:!0,children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Yes"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"No"})]}),ue.anyDisability&&(0,S.jsx)(l.A,{color:"error",children:ue.anyDisability})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Blood Group *"}),(0,S.jsxs)(v.A,{name:"bloodGroup",value:H,onChange:xe(K,"bloodGroup"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your blood group"}),c.bloodGroupList.map((e=>(0,S.jsx)(g.A,{value:e,children:e},e)))]}),ue.bloodGroup&&(0,S.jsx)(l.A,{color:"error",children:ue.bloodGroup})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Complexion *"}),(0,S.jsxs)(v.A,{name:"complexion",value:Z,onChange:xe(Q,"complexion"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your complexion"}),c.complexionList.map((e=>(0,S.jsx)(g.A,{value:e.name,children:e.name},e.id)))]}),ue.complexion&&(0,S.jsx)(l.A,{color:"error",children:ue.complexion})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Body Type *"}),(0,S.jsxs)(v.A,{name:"bodyType",value:X,onChange:xe(ee,"bodyType"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your body type"}),c.bodyTypesList.map((e=>(0,S.jsx)(g.A,{value:e.name,children:e.name},e.id)))]}),ue.bodyType&&(0,S.jsx)(l.A,{color:"error",children:ue.bodyType})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Language Known *"}),(0,S.jsx)(T.A,{value:ie,onChange:e=>{te(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&ie&&(Ae(ie),null===e||void 0===e||e.preventDefault())},placeholder:"e.g English, Hindi",size:"small"}),ie&&(0,S.jsx)(s.A,{children:ve.map((e=>(0,S.jsx)(P.A,{label:e,onClick:()=>Ae(e),style:{margin:"2px"}},e)))}),(0,S.jsx)(s.A,{mt:1,children:ne.map((e=>(0,S.jsx)(P.A,{label:e,onDelete:()=>(e=>{const i=ne.filter((i=>i!==e));se(i),x((e=>({...e,language:i})))})(e),color:"primary",style:{margin:"2px"}},e)))}),ue.selectedLanguages&&(0,S.jsx)(l.A,{color:"error",children:ue.selectedLanguages})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Eye Color *"}),(0,S.jsxs)(v.A,{name:"eyeType",value:re,onChange:xe(oe,"eyeColor"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your eye color"}),c.eyeTypesList.map((e=>(0,S.jsx)(g.A,{value:e,children:e},e)))]}),ue.eyeType&&(0,S.jsx)(l.A,{color:"error",children:ue.eyeType})]})}),(0,S.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,S.jsx)(p.A,{children:"About Yourself *"}),(0,S.jsx)(T.A,{value:ae,onChange:(je=le,e=>{const i=e.target.value,t=i.trim().split(/\s+/),n=t.length>200?t.slice(0,200).join(" "):i;je(n),he((i=>({...i,[e.target.name]:""}))),x((e=>({...e,aboutMe:i})))}),size:"small",fullWidth:!0,name:"aboutYourself",multiline:!0,rows:4}),ue.aboutYourself&&(0,S.jsx)(l.A,{color:"error",children:ue.aboutYourself})]}),z&&(0,S.jsx)(l.A,{color:"success",children:z}),U&&(0,S.jsx)(l.A,{color:"error",children:U})]})}),(0,S.jsxs)(s.A,{className:"navigation-buttons",children:[(0,S.jsx)(j.A,{variant:"contained",onClick:a,children:"Back"}),(0,S.jsx)(j.A,{variant:"contained",onClick:"1"==pe.isDemoUser?d:async()=>{if((()=>{let e=!0;const i={};return A||(i.martialStatus="Marital status is required",e=!1),"2"!=A&&"4"!=A||I||(i.hasChildren="Do you have children is required",e=!1),"1"!==I||k||(i.numberOfChildren="No. of children is required",e=!1),q||(i.selectedHeight="Height is required",e=!1),R||(i.selectedWeight="Weight is required",e=!1),J||(i.specsLenses="Specs/Lenses is required",e=!1),G||(i.anyDisability="Disability status is required",e=!1),H||(i.bloodGroup="Blood group is required",e=!1),Z||(i.complexion="Complexion is required",e=!1),X||(i.bodyType="Body type is required",e=!1),0===ne.length&&(i.selectedLanguages="Language is required",e=!1),re||(i.eyeType="Eye type is required",e=!1),ae.trim()||(i.aboutYourself="About Yourself is required",e=!1),he(i),e})()){const i=localStorage.getItem("userId"),t=localStorage.getItem("newToken"),n=localStorage.getItem("rtoken"),s=localStorage.getItem("newToken"),r={id:i,screenNumber:3,maritalStatusId:h.maritalStatusId,haveChildren:h.haveChildren||null,noOfChildren:h.noOfChildren||null,heightId:h.height,weightId:h.weight,haveSpecs:h.haveSpecs,anyDisability:h.anyDisability,bloodGroup:h.bloodGroup,complexion:h.complexion,bodyType:h.bodyType,eyeColor:h.eyeColor,languages:h.language,aboutMe:h.aboutMe,token:s,...s?{}:{userId:i}};try{if(!(await fetch("/api/admin/users/completeUserProfileV2",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`MatrimonyAndroid|Bearer ${t}`,refreshtoken:`${n}`},body:JSON.stringify(r)})).ok)throw new Error("Failed to update profile with Step 3 data");M("Profile updated successfully for Step 3"),d()}catch(e){F(e.message)}}},children:"Next"})]})]})]});var je},z=e=>{var i;let{title:t,progressBarLength:o,onBack:a,onNext:d,configData:c,currentStepId:u,userInfo:h,setUserInfo:x}=e;const[A,y]=(0,n.useState)([]),[I,C]=(0,n.useState)(h.religion||""),[k,T]=(0,n.useState)([]),[N,w]=(0,n.useState)(h.community||""),[D,E]=(0,n.useState)([]),[L,O]=(0,n.useState)(h.subCommunity||""),[B,P]=(0,n.useState)(h.motherTongue||""),[W,z]=n.useState(null),[M,U]=n.useState(null),[F,q]=(0,n.useState)({}),{showSnackBar:$,SnackbarComponent:R}=(0,f.d)(),V=(null===(i=t.find((e=>e.id===u)))||void 0===i?void 0:i.name)||"";(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token"),i=await fetch("/api/app/users/getMasterData",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error("Network response was not ok");const t=await i.json();console.log("Fetched data:",t),t&&t.recordList?(y(t.recordList.religion||[]),T(t.recordList.community||[]),E(t.recordList.subCommunity||[])):console.error("Unexpected data format:",t)}catch(e){console.error("Error fetching data:",e)}})()}),[]);const[J,_]=(0,n.useState)([]);(0,n.useEffect)((()=>{if(I){var e;const i=null===(e=A.find((e=>e.name===I)))||void 0===e?void 0:e.id;if(i){const e=k.filter((e=>e.religionId===i));_(e)}else _([])}else _([])}),[I,A,k]);const[G,Y]=(0,n.useState)([]);(0,n.useEffect)((()=>{if(N){var e;const i=null===(e=k.find((e=>e.name===N)))||void 0===e?void 0:e.id;if(i){const e=D.filter((e=>e.communityId===i));Y(e)}else Y([])}else Y([])}),[N,D,k]);const H=(e,i)=>t=>{const n=t.target.value;e(n),q((e=>({...e,[t.target.name]:""}))),x((e=>({...e,[i]:n})))};let K,Z=JSON.parse(localStorage.getItem("Credentials"));K=localStorage.getItem("isEdit");const Q=()=>{const e={};return I||(e.religion="Religion is required"),N||(e.community="Community is required"),B||(e.motherTounge="Mother tongue is required"),G.length>0&&!L&&(e.subCommunity="subcommunity is required"),q(e),0===Object.keys(e).length};return(0,n.useEffect)((()=>{null!==Z&&void 0!==Z&&Z.isDemoUser&&$("**Access Denied**\nWe're sorry, but you do not have permission to access this feature.")}),[]),(0,S.jsxs)(s.A,{children:[Z.isDemoUser>0&&(0,S.jsx)(R,{}),(0,S.jsxs)(b.A,{className:"container",children:[(0,S.jsx)(l.A,{variant:"h3",className:"title",children:V}),(0,S.jsx)(s.A,{className:"progress-bar-container",children:(0,S.jsx)(s.A,{className:"progress-bar",style:{width:o}})}),(0,S.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Religion *"}),(0,S.jsxs)(v.A,{name:"religion",value:I,onChange:H(C,"religion"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your religion"}),A.map((e=>(0,S.jsx)(g.A,{value:e.name,children:e.name},e.id)))]}),F.religion&&(0,S.jsx)(l.A,{color:"error",children:F.religion})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Community *"}),(0,S.jsxs)(v.A,{name:"community",value:N,onChange:H(w,"community"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your community"}),J.map((e=>(0,S.jsx)(g.A,{value:e.name,children:e.name},e.id)))]}),F.community&&(0,S.jsx)(l.A,{color:"error",children:F.community})]})}),G.length>0?(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Sub Community *"}),(0,S.jsxs)(v.A,{name:"subCommunity",value:L,onChange:H(O,"subCommunity"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your sub community"}),G.length>0?G.map((e=>(0,S.jsx)(g.A,{value:e.name,children:e.name},e.id))):(0,S.jsx)(g.A,{disabled:!0,children:"No Sub Community Data"})]}),F.subCommunity&&(0,S.jsx)(l.A,{color:"error",children:F.subCommunity})]})}):null,(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Mother Tounge *"}),(0,S.jsxs)(v.A,{name:"motherTounge",value:B,onChange:H(P,"motherTongue"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your mother tounge"}),c.languages.map((e=>(0,S.jsx)(g.A,{value:e,children:e},e)))]}),F.motherTounge&&(0,S.jsx)(l.A,{color:"error",children:F.motherTounge})]})}),W&&(0,S.jsx)(l.A,{color:"success",children:W}),M&&(0,S.jsx)(l.A,{color:"error",children:M})]}),(0,S.jsxs)(s.A,{className:"navigation-buttons",children:[(0,S.jsx)(j.A,{variant:"contained",onClick:a,children:"Back"}),(0,S.jsx)(j.A,{variant:"contained",onClick:"1"==Z.isDemoUser?d:async()=>{if(Q()){var e,i,t;const s=localStorage.getItem("userId"),r=localStorage.getItem("newToken"),o=localStorage.getItem("rtoken"),a=localStorage.getItem("newToken"),l={id:s,screenNumber:4,religionId:(null===(e=A.find((e=>e.name===h.religion)))||void 0===e?void 0:e.id)||null,communityId:(null===(i=k.find((e=>e.name===h.community)))||void 0===i?void 0:i.id)||null,subCommunityId:(null===(t=D.find((e=>e.name===h.subCommunity)))||void 0===t?void 0:t.id)||null,motherTongue:h.motherTongue,token:a,...a?{}:{userId:s}};try{if(!(await fetch("/api/admin/users/completeUserProfileV2",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`MatrimonyAndroid|Bearer ${r}`,refreshtoken:`${o}`},body:JSON.stringify(l)})).ok)throw new Error("Failed to update profile with Step 4 data");z("Profile updated successfully for Step 4"),d()}catch(n){U(n.message)}}},children:"Next"})]})]})]})},M=e=>{var i,t,o,a,d,c,u,h,x,A;let{title:y,progressBarLength:I,onBack:C,onNext:k,configData:N,currentStepId:w,userInfo:D,setUserInfo:E}=e;const[P,W]=(0,n.useState)(D.familyType||""),[z,M]=(0,n.useState)((null===D||void 0===D||null===(i=D.fatherDetails)||void 0===i?void 0:i.isAlive)||""),[U,F]=(0,n.useState)((null===D||void 0===D||null===(t=D.fatherDetails)||void 0===t?void 0:t.name)||""),[q,$]=(0,n.useState)(),[R,V]=(0,n.useState)(),[J,_]=(0,n.useState)(),[G,Y]=(0,n.useState)([]),[H,K]=(0,n.useState)((null===D||void 0===D||null===(o=D.fatherDetails)||void 0===o?void 0:o.educationId)||""),[Z,Q]=(0,n.useState)([]),[X,ee]=(0,n.useState)((null===D||void 0===D||null===(a=D.fatherDetails)||void 0===a?void 0:a.occupationId)||""),[ie,te]=(0,n.useState)((null===D||void 0===D||null===(d=D.motherDetails)||void 0===d?void 0:d.isAlive)||""),[ne,se]=(0,n.useState)((null===D||void 0===D||null===(c=D.motherDetails)||void 0===c?void 0:c.name)||""),[re,oe]=(0,n.useState)([]),[ae,le]=(0,n.useState)((null===D||void 0===D||null===(u=D.motherDetails)||void 0===u?void 0:u.educationId)||""),[de,ce]=(0,n.useState)([]),[ue,he]=(0,n.useState)((null===D||void 0===D||null===(h=D.motherDetails)||void 0===h?void 0:h.occupationId)||""),[me,pe]=(0,n.useState)([]),[xe,Ae]=(0,n.useState)([]),[ve,ge]=(0,n.useState)([]),[je,ye]=(0,n.useState)([]),[fe,Se]=(0,n.useState)([]),[Ie,be]=n.useState(null),[Ce,ke]=n.useState(null),[Te,Ne]=(0,n.useState)({}),[we,De]=(0,n.useState)(!1),{showSnackBar:Ee,SnackbarComponent:Le}=(0,f.d)();console.log("userInfo data------\x3e",D);const Oe=(null===(x=y.find((e=>(null===e||void 0===e?void 0:e.id)===w)))||void 0===x?void 0:x.name)||"";let Be=JSON.parse(localStorage.getItem("Credentials"));(0,n.useEffect)((()=>{var e;null!==D&&void 0!==D&&null!==(e=D.familyDetail)&&void 0!==e&&e.length&&Se(D.familyDetail)}),[D]),(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token"),i=await fetch("/api/app/users/getMasterData",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error("Network response was not ok");const t=await i.json();t&&t.recordList?(Y(t.recordList.education||[]),oe(t.recordList.education||[]),Q(t.recordList.occupation||[]),ce(t.recordList.occupation||[]),pe(t.recordList.occupation||[]),Ae(t.recordList.education||[])):console.error("Unexpected data format:",t)}catch(e){console.error("Error fetching data:",e)}})()}),[]),(0,n.useEffect)((()=>{N.familyTypes&&ge(N.familyTypes)}),[N]),(0,n.useEffect)((()=>{var e;const i=null===(e=fe.map((e=>null===N||void 0===N?void 0:N.familyTypes.find((i=>(null===i||void 0===i?void 0:i.type)==(null===e||void 0===e?void 0:e.memberType))))))||void 0===e?void 0:e.map((e=>null===e||void 0===e?void 0:e.subTypes));ye(i.flat())}),[]);let Pe;Pe=localStorage.getItem("isEdit");const We=(e,i,t)=>n=>{const s=n.target.value;e(n.target.value),Ne((e=>({...e,[n.target.name]:""}))),E((e=>({...e,[i]:{...e[i],[t]:s}})))},ze=(e,i,t)=>n=>{const s=n.target.value;e(n.target.value),Ne((e=>({...e,[n.target.name]:""}))),E((e=>({...e,[i]:{...e[i],[t]:s}})))},Me=(e,i,t)=>n=>{const s=n.target.value;e(n.target.value),Ne((e=>({...e,[n.target.name]:""}))),E((e=>({...e,[i]:{...e[i],[t]:s}})))};console.info("setFieldData------------\x3e",fe);const Ue=(e,i,t,n,s)=>{Se((n=>n.map((n=>(null===n||void 0===n?void 0:n.id)===e?{...n,[i]:t}:n)))),Ne((e=>{const n={...e};return t?delete n[`${i}_${s}`]:n[`${i}_${s}`]=`${i} is required.`,n})),E((e=>({...e,[n]:{...e[n],[i]:t}})))};return(0,n.useEffect)((()=>{null!==Be&&void 0!==Be&&Be.isDemoUser&&Ee("**Access Denied**\nWe're sorry, but you do not have permission to access this feature.")}),[]),(0,S.jsxs)(s.A,{children:[Be.isDemoUser>0&&(0,S.jsx)(Le,{}),(0,S.jsxs)(b.A,{className:"container",children:[(0,S.jsx)(l.A,{variant:"h3",className:"title",children:Oe}),(0,S.jsx)(s.A,{className:"progress-bar-container",children:(0,S.jsx)(s.A,{className:"progress-bar",style:{width:I}})}),(0,S.jsx)(s.A,{sx:{width:"100%",mb:2,p:4},children:(0,S.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsxs)(m.A,{component:"fieldset",children:[(0,S.jsx)(p.A,{children:"Family Type *"}),(0,S.jsxs)(L.A,{value:P,onChange:e=>{W(e.target.value);const i=e.target.value;Ne((e=>({...e,familyType:""}))),E((e=>({...e,familyType:i})))},row:!0,children:[(0,S.jsx)(O.A,{value:"JointFamily",control:(0,S.jsx)(B.A,{}),label:"Joint Family"}),(0,S.jsx)(O.A,{value:"Nuclear",control:(0,S.jsx)(B.A,{}),label:"Nuclear"})]}),(null===Te||void 0===Te?void 0:Te.familyType)&&(0,S.jsx)(l.A,{color:"error",children:Te.familyType})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(l.A,{variant:"h2",children:"Parents Details"})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(l.A,{variant:"h6",children:"Father's Details"})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Alive Status *"}),(0,S.jsxs)(L.A,{value:z,onChange:We(M,"fatherDetails","isAlive"),row:!0,name:"fatherStatus",children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Alive"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"Passed Away"})]}),Te.fatherStatus&&(0,S.jsx)(l.A,{color:"error",children:Te.fatherStatus})]})}),(0,S.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,S.jsx)(p.A,{children:"Father's Name"}),(0,S.jsx)(T.A,{value:U,onChange:ze(F,"fatherDetails","name"),size:"small",fullWidth:!0,name:"fatherName"}),Te.fatherName&&(0,S.jsx)(l.A,{color:"error",children:Te.fatherName})]}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Education"}),(0,S.jsxs)(v.A,{value:H,onChange:Me(K,"fatherDetails","educationId"),size:"small",displayEmpty:!0,name:"fatherEducation",renderValue:e=>{const i=G.find((i=>(null===i||void 0===i?void 0:i.id)===e));return i?i.name:"Select Education"},children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Education"}),G.map((e=>(0,S.jsx)(g.A,{value:null===e||void 0===e?void 0:e.id,children:e.name},null===e||void 0===e?void 0:e.id)))]}),Te.fatherEducation&&(0,S.jsx)(l.A,{color:"error",children:Te.fatherEducation})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Occupation"}),(0,S.jsxs)(v.A,{value:X,onChange:Me(ee,"fatherDetails","occupationId"),size:"small",displayEmpty:!0,name:"fatherPost",renderValue:e=>{const i=Z.find((i=>i.id===e));return i?i.name:"Select Post"},children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Post"}),Z.map((e=>(0,S.jsx)(g.A,{value:null===e||void 0===e?void 0:e.id,children:e.name},null===e||void 0===e?void 0:e.id)))]}),Te.fatherPost&&(0,S.jsx)(l.A,{color:"error",children:Te.fatherPost})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(l.A,{variant:"h6",children:"Mother's Details"})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Alive Status *"}),(0,S.jsxs)(L.A,{value:ie,onChange:We(te,"motherDetails","isAlive"),row:!0,name:"motherStatus",children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Alive"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"Passed Away"})]}),Te.motherStatus&&(0,S.jsx)(l.A,{color:"error",children:Te.motherStatus})]})}),(0,S.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,S.jsx)(p.A,{children:"Mother's Name"}),(0,S.jsx)(T.A,{value:ne,onChange:ze(se,"motherDetails","name"),size:"small",fullWidth:!0,name:"motherName"}),Te.motherName&&(0,S.jsx)(l.A,{color:"error",children:Te.motherName})]}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Education"}),(0,S.jsxs)(v.A,{value:ae,onChange:Me(le,"motherDetails","educationId"),size:"small",displayEmpty:!0,name:"motherEducation",renderValue:e=>{const i=re.find((i=>(null===i||void 0===i?void 0:i.id)===e));return i?i.name:"Select Education"},children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Education"}),re.map((e=>(0,S.jsx)(g.A,{value:null===e||void 0===e?void 0:e.id,children:e.name},null===e||void 0===e?void 0:e.id)))]}),Te.motherEducation&&(0,S.jsx)(l.A,{color:"error",children:Te.motherEducation})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Occupation"}),(0,S.jsxs)(v.A,{value:ue,onChange:Me(he,"motherDetails","occupationId"),size:"small",displayEmpty:!0,name:"motherPost",renderValue:e=>{const i=de.find((i=>(null===i||void 0===i?void 0:i.id)===e));return i?i.name:"Select Post"},children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Post"}),de.map((e=>(0,S.jsx)(g.A,{value:null===e||void 0===e?void 0:e.id,children:e.name},null===e||void 0===e?void 0:e.id)))]})]})}),(0,S.jsx)(j.A,{variant:"contained",onClick:()=>{Se((e=>{var i;return[...e,{id:(null===D||void 0===D||null===(i=D.familyDetail)||void 0===i?void 0:i.id)||null,educationId:D.familyDetail.educationId||null,occupationId:D.familyDetail.occupationId||null,maritalStatusId:D.familyDetail.maritalStatusId||null,memberType:D.familyDetail.memberType||null,memberSubType:D.familyDetail.memberSubType||null,name:D.familyDetail.name||""}]})),De(!0)},sx:{mt:3},children:"Add"}),(we||(null===D||void 0===D||null===(A=D.familyDetail)||void 0===A?void 0:A.length)>0)&&(null===fe||void 0===fe?void 0:fe.map(((e,i)=>{var t,n;return(0,S.jsxs)(r.Ay,{container:!0,spacing:2,sx:{mt:3,mb:3},children:[(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(j.A,{variant:"contained",color:"warning",onClick:()=>{return i=null===e||void 0===e?void 0:e.id,Se((e=>e.filter((e=>(null===e||void 0===e?void 0:e.id)!==i)))),void Ne((e=>{const t={...e};return delete t[`otherEducation_${i}`],delete t[`otherPost_${i}`],delete t[`maritalStatus_${i}`],t}));var i},children:"Cancel"})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Family Type *"}),(0,S.jsxs)(v.A,{value:null===e||void 0===e?void 0:e.memberType,onChange:e=>((e,i,t,n)=>{const s=e.target.value,r=fe.map(((e,t)=>t===i?{...e,memberType:s,memberSubType:""}:e));Se(r);const o=N.familyTypes.find((e=>e.type==s));ye(o?o.subTypes:[]),Ne((e=>({...e,[`familyType_${i}`]:""}))),E((e=>({...e,[t]:{...e[t],[n]:s}})))})(e,i,"familyDetail","memberType"),size:"small",displayEmpty:!0,name:`familyType_${i}`,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Family Type"}),null===N||void 0===N||null===(t=N.familyTypes)||void 0===t?void 0:t.map((e=>(0,S.jsx)(g.A,{value:e.type,children:e.type},e.type)))]}),Te[`familyType_${i}`]&&(0,S.jsx)(l.A,{color:"error",children:Te[`familyType_${i}`]})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Sub Type"}),(0,S.jsxs)(v.A,{value:null===e||void 0===e?void 0:e.memberSubType,onChange:e=>((e,i,t,n)=>{const s=e.target.value,r=fe.map(((e,t)=>t===i?{...e,memberSubType:s}:e));Se(r),Ne((e=>({...e,[`subType_${i}`]:""}))),E((e=>({...e,[t]:{...e[t],[n]:s}})))})(e,i,"familyDetail","memberSubType"),size:"small",displayEmpty:!0,name:`subType_${i}`,renderValue:()=>null===e||void 0===e?void 0:e.memberSubType,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Sub Type"}),null===je||void 0===je?void 0:je.map((e=>(0,S.jsx)(g.A,{value:e,children:e},e)))]}),Te[`subType_${i}`]&&(0,S.jsx)(l.A,{color:"error",children:Te[`subType_${i}`]})]})}),(0,S.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,S.jsx)(p.A,{children:"Name"}),(0,S.jsx)(T.A,{value:null===e||void 0===e?void 0:e.name,onChange:e=>((e,i,t,n,s)=>{Se((n=>n.map(((n,s)=>s===e?{...n,[i]:t}:n)))),Ne((n=>{const r={...n};return t.trim()?delete r[`${i}_${e}`]:r[`${i}_${e}`]=`${s} is required.`,r})),E((e=>({...e,[n]:{...e[n],[s]:t}})))})(i,"name",e.target.value,"familyDetail","name"),size:"small",fullWidth:!0,name:`name_${i}`,error:!!Te[`name_${i}`]}),Te[`name_${i}`]&&(0,S.jsx)(l.A,{color:"error",children:Te[`name_${i}`]})]}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Education Degree *"}),(0,S.jsxs)(v.A,{value:(null===e||void 0===e?void 0:e.educationId)||"",onChange:t=>Ue(null===e||void 0===e?void 0:e.id,"educationId",t.target.value,"familyDetail",i),size:"small",displayEmpty:!0,name:`educationType_${i}`,renderValue:()=>{var i;return(null===xe||void 0===xe||null===(i=xe.find((i=>(null===i||void 0===i?void 0:i.id)===(null===e||void 0===e?void 0:e.educationId))))||void 0===i?void 0:i.name)||""},children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Education"}),xe.map((e=>(0,S.jsx)(g.A,{value:null===e||void 0===e?void 0:e.id,children:e.name},null===e||void 0===e?void 0:e.id)))]}),Te[`educationType_${i}`]&&(0,S.jsx)(l.A,{color:"error",children:Te[`educationType_${i}`]})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Profession *"}),(0,S.jsxs)(v.A,{value:(null===e||void 0===e?void 0:e.occupationId)||"",onChange:t=>Ue(e.id,"occupationId",t.target.value,"familyDetail",i),size:"small",displayEmpty:!0,name:`occupationType_${i}`,renderValue:()=>{var i;return(null===me||void 0===me||null===(i=me.find((i=>(null===i||void 0===i?void 0:i.id)===(null===e||void 0===e?void 0:e.occupationId))))||void 0===i?void 0:i.name)||""},children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Profession"}),me.map((e=>(0,S.jsx)(g.A,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)))]}),Te[`occupationType_${i}`]&&(0,S.jsx)(l.A,{color:"error",children:Te[`occupationType_${i}`]})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Marital Status *"}),(0,S.jsxs)(v.A,{value:(null===e||void 0===e?void 0:e.maritalStatusId)||"",onChange:t=>Ue(null===e||void 0===e?void 0:e.id,"maritalStatusId",t.target.value,"familyDetail",i),size:"small",displayEmpty:!0,name:`maritalStatusType_${i}`,renderValue:()=>{var i,t;return(null===N||void 0===N||null===(i=N.maritalStatus)||void 0===i||null===(t=i.find((i=>(null===i||void 0===i?void 0:i.id)===(null===e||void 0===e?void 0:e.maritalStatusId))))||void 0===t?void 0:t.name)||"Select Marital Status"},children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your marital status"}),(null===N||void 0===N||null===(n=N.maritalStatus)||void 0===n?void 0:n.length)>0?N.maritalStatus.map((e=>(0,S.jsx)(g.A,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id))):(0,S.jsx)(g.A,{disabled:!0,children:"No marital statuses available"})]}),Te[`maritalStatusType_${i}`]&&(0,S.jsx)(l.A,{color:"error",children:Te[`maritalStatusType_${i}`]})]})})]},null===e||void 0===e?void 0:e.id)}))),Ie&&(0,S.jsx)(l.A,{color:"success",children:Ie}),Ce&&(0,S.jsx)(l.A,{color:"error",children:Ce})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsxs)(s.A,{className:"navigation-buttons",children:[(0,S.jsx)(j.A,{variant:"contained",onClick:C,children:"Back"}),(0,S.jsx)(j.A,{variant:"contained",onClick:"1"==Be.isDemoUser?k:async()=>{if((()=>{let e={};return P||(e.familyType="Family Type is required."),z||(e.fatherStatus="Father's status is required."),ie||(e.motherStatus="Mother's status is required."),U||(e.fatherName="Father's Name is required."),H||(e.fatherEducation="Father's Education is required."),X||(e.fatherPost="Father's Post is required."),ne||(e.motherName="Mother's Name is required."),ae||(e.motherEducation="Mother's Education is required."),ue||(e.motherPost="Mother's Post is required."),fe.forEach(((i,t)=>{i.educationId||(e[`educationType_${t}`]="Education Degree is required."),i.occupationId||(e[`occupationType_${t}`]="Profession is required."),i.maritalStatusId||(e[`maritalStatusType_${t}`]="Marital Status is required."),i.memberType||(e[`familyType_${t}`]="Family Type is required."),i.memberSubType||(e[`subType_${t}`]="Sub Type is required."),i.name||(e[`name_${t}`]="Name is required.")})),Ne(e),0===Object.keys(e).length})()){var e,i,t,n,s,r,o,a,l,d;const u=localStorage.getItem("userId"),h=localStorage.getItem("newToken"),m=localStorage.getItem("rtoken"),p=localStorage.getItem("newToken"),x={id:u,screenNumber:5,familyType:D.familyType,token:p,...p?{}:{userId:u},fatherDetails:{id:(null===(e=D.fatherDetails)||void 0===e?void 0:e.id)||"",name:(null===D||void 0===D||null===(i=D.fatherDetails)||void 0===i?void 0:i.name)||"",memberType:P,memberSubType:"Father",educationId:(null===D||void 0===D||null===(t=D.fatherDetails)||void 0===t?void 0:t.educationId)||"",occupationId:null===D||void 0===D||null===(n=D.fatherDetails)||void 0===n?void 0:n.occupationId,maritalStatusId:null,isAlive:null===D||void 0===D||null===(s=D.fatherDetails)||void 0===s?void 0:s.isAlive},motherDetails:{id:(null===D||void 0===D||null===(r=D.motherDetails)||void 0===r?void 0:r.id)||"",name:(null===D||void 0===D||null===(o=D.motherDetails)||void 0===o?void 0:o.name)||"",memberType:P,memberSubType:"Mother",educationId:(null===D||void 0===D||null===(a=D.motherDetails)||void 0===a?void 0:a.educationId)||"",occupationId:null===D||void 0===D||null===(l=D.motherDetails)||void 0===l?void 0:l.occupationId,maritalStatusId:null,isAlive:null===D||void 0===D||null===(d=D.motherDetails)||void 0===d?void 0:d.isAlive},familyDetail:fe.map(((e,i)=>({id:null===e||void 0===e?void 0:e.id,name:e.name,memberType:e.memberType,memberSubType:e.memberSubType,educationId:e.educationId,occupationId:e.occupationId,maritalStatusId:e.maritalStatusId,isAlive:1})))};Se(null===x||void 0===x?void 0:x.familyDetail);try{const e=await fetch("/api/admin/users/completeUserProfileV2",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`MatrimonyAndroid|Bearer ${h}`,refreshtoken:`${m}`},body:JSON.stringify(x)});if(!e.ok)throw new Error("Failed to update profile with Step 5 data");const i=await e.json();E((e=>{var t,n,s,r;return{...e,fatherDetails:{...e.fatherDetails,id:(null===i||void 0===i||null===(t=i.recordList[0])||void 0===t||null===(n=t.fatherDetails)||void 0===n?void 0:n.id)||null},motherDetails:{...e.motherDetails,id:(null===i||void 0===i||null===(s=i.recordList[0])||void 0===s||null===(r=s.motherDetails)||void 0===r?void 0:r.id)||null},familyDetail:Array.isArray(e.familyDetail)?e.familyDetail.map(((e,t)=>{var n,s,r;return{...e,id:(null===i||void 0===i||null===(n=i.recordList[0])||void 0===n||null===(s=n.familyDetail)||void 0===s||null===(r=s[t])||void 0===r?void 0:r.id)||(null===e||void 0===e?void 0:e.id)}})):[]}})),be("Profile updated successfully for Step 5"),k()}catch(c){ke(c.message)}}},children:"Next"})]})})]})]})};var U=t(51962);const F=e=>{let{defaultCenter:i,onMarkerUpdate:t}=e;const s=(0,n.useRef)(null),[r,o]=(0,n.useState)(null),a=(0,n.useRef)(null),l=(0,n.useRef)(null),d=e=>{if(s.current&&!r){const t=new window.google.maps.Map(s.current,{center:e||i,zoom:12});o(t);const n=new window.google.maps.Marker({position:e||i,map:t});a.current=n,t.addListener("click",(e=>{const i=e.latLng;if(i){a.current&&a.current.setMap(null);const e=new window.google.maps.Marker({position:i,map:t});a.current=e,c(i.lat(),i.lng())}}))}},c=(e,i)=>{l.current||(l.current=new window.google.maps.Geocoder);const n={lat:e,lng:i};l.current.geocode({location:n},((n,s)=>{if("OK"===s&&n&&n[0]){const s=n[0].formatted_address;console.log("Geocoded Address:",s),t(e,i,s)}else console.error("Geocode failed:",s)}))};return(0,n.useEffect)((()=>{window.google&&window.google.maps?d(i):(e=>{if(!document.querySelector(`script[src="${e}"]`)){const t=document.createElement("script");t.src=e,t.async=!0,t.defer=!0,t.onload=()=>{d(i)},document.body.appendChild(t)}})("https://maps.googleapis.com/maps/api/js?key=AIzaSyDEKhKKZ3AjjBPEWh3XJyiOmbckQvdWx5A")}),[r,i]),(0,S.jsx)("div",{ref:s,style:{width:"100%",height:"300px"}})},q=e=>{var i,t,o,a,d,c,u,h,x,A,y,I,C,k,N,w,D,E,P;let{title:W,progressBarLength:z,onBack:M,onNext:q,configData:$,currentStepId:R,userInfo:V,setUserInfo:J}=e;const[_,G]=(0,n.useState)({addressLine1:(null===V||void 0===V||null===(i=V.permanentAddress)||void 0===i?void 0:i.addressLine1)||"",addressLine2:(null===V||void 0===V||null===(t=V.permanentAddress)||void 0===t?void 0:t.addressLine2)||"",name:"",cityName:(null===V||void 0===V||null===(o=V.permanentAddress)||void 0===o?void 0:o.cityName)||"",state:(null===V||void 0===V||null===(a=V.permanentAddress)||void 0===a?void 0:a.state)||"",country:(null===V||void 0===V||null===(d=V.permanentAddress)||void 0===d?void 0:d.country)||"",pincode:(null===V||void 0===V||null===(c=V.permanentAddress)||void 0===c?void 0:c.pincode)||"",residentialStatus:(null===V||void 0===V||null===(u=V.permanentAddress)||void 0===u?void 0:u.residentialStatus)||"",latitude:(null===V||void 0===V||null===(h=V.permanentAddress)||void 0===h?void 0:h.latitude)||null,longitude:(null===V||void 0===V||null===(x=V.permanentAddress)||void 0===x?void 0:x.longitude)||null,cityId:null,stateId:null,countryId:null,districtId:null}),[Y,H]=(0,n.useState)({addressLine1:(null===V||void 0===V||null===(A=V.currentAddress)||void 0===A?void 0:A.addressLine1)||"",addressLine2:(null===V||void 0===V||null===(y=V.currentAddress)||void 0===y?void 0:y.addressLine2)||"",name:"",cityName:(null===V||void 0===V||null===(I=V.currentAddress)||void 0===I?void 0:I.cityName)||"",state:(null===V||void 0===V||null===(C=V.currentAddress)||void 0===C?void 0:C.state)||"",country:(null===V||void 0===V||null===(k=V.currentAddress)||void 0===k?void 0:k.country)||"",pincode:(null===V||void 0===V||null===(N=V.currentAddress)||void 0===N?void 0:N.pincode)||"",residentialStatus:(null===V||void 0===V||null===(w=V.currentAddress)||void 0===w?void 0:w.residentialStatus)||"",latitude:(null===V||void 0===V||null===(D=V.currentAddress)||void 0===D?void 0:D.latitude)||null,longitude:(null===V||void 0===V||null===(E=V.currentAddress)||void 0===E?void 0:E.longitude)||null,cityId:null,stateId:null,countryId:null,districtId:null}),[K,Z]=(0,n.useState)(!1);console.log("tick",K);const[Q,X]=(0,n.useState)({permanentAddress:{addressLine1:"",city:"",state:"",country:"",pincode:"",residentialStatus:""},currentAddress:{addressLine1:"",city:"",state:"",country:"",pincode:"",residentialStatus:""},visaStatus:"",willingToGoAbroad:"",nativePlace:"",citizenship:""}),[ee,ie]=(0,n.useState)([]),[te,ne]=(0,n.useState)([]),[se,re]=(0,n.useState)(V.willingToGoAbroad||""),[oe,ae]=(0,n.useState)(V.nativePlace||""),[le,de]=(0,n.useState)(V.citizenship||""),[ce,ue]=(0,n.useState)(V.visaStatus||""),{showSnackBar:he,SnackbarComponent:me}=(0,f.d)(),pe=(null===(P=W.find((e=>e.id===R)))||void 0===P?void 0:P.name)||"",xe=async e=>{if(6===e.length)try{const i=localStorage.getItem("token"),t=await fetch("/api/app/regions/getRegionByPincode",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({pincode:e})});if(!t.ok)throw new Error("Network response was not ok");const n=await t.json();if(console.log("Fetched data for Permanent Address:",n),n&&n.recordList){const e=n.recordList.map((e=>({id:e.id,name:e.name}))),{stateName:i,countryName:t}=n.recordList[0];ie(e),G((e=>({...e,city:"",state:i||"",country:t||""})))}else console.error("Unexpected data format for Permanent Address:",n)}catch(i){console.error("Error fetching data for Permanent Address:",i)}};let Ae=JSON.parse(localStorage.getItem("Credentials"));const ve=async e=>{if(6===e.length)try{const i=localStorage.getItem("token"),t=await fetch("/api/app/regions/getRegionByPincode",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({pincode:e})});if(!t.ok)throw new Error("Network response was not ok");const n=await t.json();if(console.log("Fetched data for Current Address:",n),n&&n.recordList){const e=n.recordList.map((e=>({id:e.id,name:e.name}))),{stateName:i,countryName:t}=n.recordList[0];ne(e),H((e=>({...e,city:"",state:i||"",country:t||""})))}else console.error("Unexpected data format for Current Address:",n)}catch(i){console.error("Error fetching data for Current Address:",i)}};(0,n.useEffect)((()=>{null!==_&&void 0!==_&&_.pincode&&6===(null===_||void 0===_?void 0:_.pincode.length)&&xe(null===_||void 0===_?void 0:_.pincode)}),[null===_||void 0===_?void 0:_.pincode]),(0,n.useEffect)((()=>{null!==Y&&void 0!==Y&&Y.pincode&&6===(null===Y||void 0===Y?void 0:Y.pincode.length)&&ve(null===Y||void 0===Y?void 0:Y.pincode)}),[null===Y||void 0===Y?void 0:Y.pincode]);const ge=e=>i=>{const{name:t,value:n}=i.target;G((e=>({...e,[t]:n}))),X((e=>({...e,permanentAddress:{...e.permanentAddress,[t]:""}}))),"pincode"===t&&6===n.length&&xe(n),J((i=>({...i,[e]:{...i[e],[t]:n}})))},je=e=>i=>{const{name:t,value:n}=i.target;H((e=>({...e,[t]:n}))),X((e=>({...e,currentAddress:{...e.currentAddress,[t]:""}}))),"pincode"===t&&6===n.length&&ve(n),J((i=>({...i,[e]:{...i[e],[t]:n}})))};console.log("hi",V.currentAddress,V),(0,n.useEffect)((()=>{H(null===V||void 0===V?void 0:V.permanentAddress),(null===Y||void 0===Y?void 0:Y.addressLine1)==(null===_||void 0===_?void 0:_.addressLine1)&&null!==Y&&void 0!==Y&&Y.addressLine1&&Z(!0)}),[]);let ye;ye=localStorage.getItem("isEdit");return(0,n.useEffect)((()=>{null!==Ae&&void 0!==Ae&&Ae.isDemoUser&&he("**Access Denied**\nWe're sorry, but you do not have permission to access this feature.")}),[]),(0,S.jsxs)(s.A,{children:[Ae.isDemoUser>0&&(0,S.jsx)(me,{}),(0,S.jsxs)(b.A,{className:"container",children:[(0,S.jsx)(l.A,{variant:"h3",className:"title",children:pe}),(0,S.jsx)(s.A,{className:"progress-bar-container",children:(0,S.jsx)(s.A,{className:"progress-bar",style:{width:z}})}),(0,S.jsxs)(s.A,{sx:{width:"100%",mb:2,p:4},children:[(0,S.jsx)(l.A,{variant:"h3",className:"section-title",children:"Permanent Address"}),(0,S.jsx)(s.A,{sx:{mt:2,mb:2},children:(0,S.jsx)(F,{defaultCenter:{lat:_.latitude||21.14,lng:_.longitude||73.09},onMarkerUpdate:(e,i,t)=>{G((n=>({...n,addressLine1:t,latitude:e,longitude:i}))),J((n=>({...n,permanentAddress:{...n.permanentAddress,addressLine1:t,latitude:e,longitude:i}}))),X((e=>({...e,permanentAddress:{...e.permanentAddress,addressLine1:""}})))}})}),(0,S.jsxs)(r.Ay,{container:!0,spacing:2,children:[(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Address *"}),(0,S.jsx)(T.A,{name:"addressLine1",value:_.addressLine1,onChange:(Se="permanentAddress",e=>{const{name:i,value:t}=e.target;G((e=>({...e,[i]:t}))),J((e=>({...e,[Se]:{...e[Se],addressLine1:t}})))}),size:"small"}),Q.permanentAddress.addressLine1&&(0,S.jsx)(l.A,{color:"error",children:Q.permanentAddress.addressLine1})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Address"}),(0,S.jsx)(T.A,{name:"addressLine2",value:_.addressLine2,onChange:ge("permanentAddress"),placeholder:"Enter Address place",size:"small"})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Pincode *"}),(0,S.jsx)(T.A,{name:"pincode",value:_.pincode,onChange:ge("permanentAddress"),size:"small"}),Q.permanentAddress.pincode&&(0,S.jsx)(l.A,{color:"error",children:Q.permanentAddress.pincode})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"City *"}),(0,S.jsxs)(v.A,{value:_.cityName,onChange:(e=>i=>{const t=ee.find((e=>e.name===i.target.value)),n=i.target.value;t?G((e=>({...e,cityName:t.name,cityId:t.id}))):console.error("Selected city not found"),X((e=>({...e,permanentAddress:{...e.permanentAddress,city:"",state:"",country:""}}))),J((i=>({...i,[e]:{...i[e],cityName:n}})))})("permanentAddress"),size:"small",children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select City"}),ee.map((e=>(0,S.jsx)(g.A,{value:e.name,children:e.name},e.id)))]}),Q.permanentAddress.city&&(0,S.jsx)(l.A,{color:"error",children:Q.permanentAddress.city})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"State *"}),(0,S.jsx)(T.A,{name:"state",value:_.state,onChange:ge("permanentAddress"),size:"small"}),Q.permanentAddress.state&&(0,S.jsx)(l.A,{color:"error",children:Q.permanentAddress.state})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Country *"}),(0,S.jsx)(T.A,{name:"country",value:_.country,onChange:ge("permanentAddress"),size:"small"}),Q.permanentAddress.country&&(0,S.jsx)(l.A,{color:"error",children:Q.permanentAddress.country})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Residential Status *"}),(0,S.jsxs)(v.A,{value:_.residentialStatus,onChange:(e=>i=>{const t=$.residentialStatus.find((e=>e===i.target.value)),n=i.target.value;t?G((e=>({...e,residentialStatus:t}))):console.error("Selected residential status not found"),X((e=>({...e,permanentAddress:{...e.permanentAddress,residentialStatus:""}}))),J((i=>({...i,[e]:{...i[e],residentialStatus:n}})))})("permanentAddress"),size:"small",children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Residential Status"}),$.residentialStatus.map((e=>(0,S.jsx)(g.A,{value:e,children:e},e)))]}),Q.permanentAddress.residentialStatus&&(0,S.jsx)(l.A,{color:"error",children:Q.permanentAddress.residentialStatus})]})})]}),(0,S.jsx)(l.A,{variant:"h3",className:"section-title",sx:{mt:2},children:"Current Address"}),(0,S.jsx)(O.A,{control:(0,S.jsx)(U.A,{checked:K,onChange:e=>{Z(e.target.checked),e.target.checked?H(_):H({addressLine1:"",addressLine2:"",name:"",cityName:"",state:"",country:"",pincode:"",residentialStatus:"",latitude:null,longitude:null,cityId:null,stateId:null,countryId:null,districtId:null})}}),label:"Same as Permanent Address"}),(0,S.jsxs)(r.Ay,{children:[(0,S.jsx)(s.A,{sx:{mt:2,mb:2},children:(0,S.jsx)(F,{defaultCenter:{lat:(null===Y||void 0===Y?void 0:Y.latitude)||21.14,lng:(null===Y||void 0===Y?void 0:Y.longitude)||73.09},onMarkerUpdate:(e,i,t)=>{console.log("Current Address Lat:",e,"Lng:",i),H((n=>({...n,addressLine1:t,latitude:e,longitude:i}))),J((n=>({...n,currentAddress:{...n.currentAddress,addressLine1:t,latitude:e,longitude:i}}))),X((e=>({...e,currentAddress:{...e.currentAddress,addressLine1:""}})))}})}),(0,S.jsxs)(r.Ay,{container:!0,spacing:2,children:[(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Address *"}),(0,S.jsx)(T.A,{name:"addressLine1",value:null===Y||void 0===Y?void 0:Y.addressLine1,onChange:(e=>i=>{const{name:t,value:n}=i.target;H((e=>({...e,[t]:n}))),J((i=>({...i,[e]:{...i[e],addressLine1:n}})))})("currentAddress"),size:"small"}),Q.currentAddress.addressLine1&&(0,S.jsx)(l.A,{color:"error",children:Q.currentAddress.addressLine1})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Address"}),(0,S.jsx)(T.A,{name:"addressLine2",value:null===Y||void 0===Y?void 0:Y.addressLine2,onChange:je("currentAddress"),placeholder:"Enter Address place",size:"small"})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Pincode *"}),(0,S.jsx)(T.A,{name:"pincode",value:null===Y||void 0===Y?void 0:Y.pincode,onChange:je("currentAddress"),size:"small"}),Q.currentAddress.pincode&&(0,S.jsx)(l.A,{color:"error",children:Q.currentAddress.pincode})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"City *"}),(0,S.jsxs)(v.A,{value:null===Y||void 0===Y?void 0:Y.cityName,onChange:(e=>i=>{const t=te.find((e=>e.name===i.target.value)),n=i.target.value;t?H((e=>({...e,cityName:t.name,cityId:t.id}))):console.error("Selected city not found"),X((e=>({...e,currentAddress:{...e.currentAddress,city:"",state:"",country:""}}))),J((i=>({...i,[e]:{...i[e],cityName:n}})))})("currentAddress"),size:"small",children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select City"}),te.map((e=>(0,S.jsx)(g.A,{value:e.name,children:e.name},e.id)))]}),Q.currentAddress.city&&(0,S.jsx)(l.A,{color:"error",children:Q.currentAddress.city})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"State *"}),(0,S.jsx)(T.A,{name:"state",value:null===Y||void 0===Y?void 0:Y.state,onChange:je("currentAddress"),size:"small"}),Q.currentAddress.state&&(0,S.jsx)(l.A,{color:"error",children:Q.currentAddress.state})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Country *"}),(0,S.jsx)(T.A,{name:"country",value:null===Y||void 0===Y?void 0:Y.country,onChange:je("currentAddress"),size:"small"}),Q.currentAddress.country&&(0,S.jsx)(l.A,{color:"error",children:Q.currentAddress.country})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Residential Status *"}),(0,S.jsxs)(v.A,{value:null===Y||void 0===Y?void 0:Y.residentialStatus,onChange:(e=>i=>{const t=$.residentialStatus.find((e=>e===i.target.value)),n=i.target.value;t?H((e=>({...e,residentialStatus:t}))):console.error("Selected residential status not found"),X((e=>({...e,currentAddress:{...e.currentAddress,residentialStatus:""}}))),J((i=>({...i,[e]:{...i[e],residentialStatus:n}})))})("currentAddress"),size:"small",children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Residential Status"}),$.residentialStatus.map((e=>(0,S.jsx)(g.A,{value:e,children:e},e)))]}),Q.currentAddress.residentialStatus&&(0,S.jsx)(l.A,{color:"error",children:Q.currentAddress.residentialStatus})]})})]})]}),(0,S.jsx)(l.A,{variant:"h3",className:"section-title",sx:{mt:2},children:"Additional Information"}),(0,S.jsxs)(r.Ay,{container:!0,spacing:2,children:[(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Native Place"}),(0,S.jsx)(T.A,{name:"nativePlace",value:oe,onChange:e=>{ae(e.target.value);const i=e.target.value;X((e=>({...e,nativePlace:""}))),J((e=>({...e,nativePlace:i})))},placeholder:"Enter Native place",size:"small"}),Q.nativePlace&&(0,S.jsx)(l.A,{color:"error",children:Q.nativePlace})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"CitizenShip *"}),(0,S.jsx)(T.A,{name:"citizenship",value:le,onChange:e=>{de(e.target.value);const i=e.target.value;X((e=>({...e,citizenship:""}))),J((e=>({...e,citizenship:i})))},placeholder:"Enter CitizenShip",size:"small"}),Q.citizenship&&(0,S.jsx)(l.A,{color:"error",children:Q.citizenship})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Willing To Go Abroad *"}),(0,S.jsxs)(L.A,{name:"willingToGoAbroad",value:se,onChange:(fe=re,e=>{fe(e.target.value);const i=e.target.value;X((i=>({...i,[e.target.name]:""}))),J((e=>({...e,willingToGoAbroad:i})))}),row:!0,children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Yes"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"No"})]}),Q.willingToGoAbroad&&(0,S.jsx)(l.A,{color:"error",children:Q.willingToGoAbroad})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Visa Status *"}),(0,S.jsxs)(v.A,{value:ce,onChange:e=>{ue(e.target.value);const i=e.target.value;X((e=>({...e,visaStatus:""}))),J((e=>({...e,visaStatus:i})))},size:"small",children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Visa Status"}),$.visaStatusList.map((e=>(0,S.jsx)(g.A,{value:e,children:e},e)))]}),Q.visaStatus&&(0,S.jsx)(l.A,{color:"error",children:Q.visaStatus})]})})]})]}),(0,S.jsxs)(s.A,{className:"navigation-buttons",children:[(0,S.jsx)(j.A,{variant:"contained",onClick:M,children:"Back"}),(0,S.jsx)(j.A,{variant:"contained",onClick:"1"==Ae.isDemoUser?q:async()=>{try{var e,i,t,n,s,r;const o=localStorage.getItem("newToken"),a=localStorage.getItem("rtoken"),{newErrors:l,hasErrors:d}=(()=>{const e={permanentAddress:{addressLine1:_.addressLine1?"":"Address is required",city:_.cityName?"":"City is required",state:_.state?"":"State is required",country:_.country?"":"Country is required",pincode:_.pincode?"":"Pincode is required",residentialStatus:_.residentialStatus?"":"Residential Status is required"},currentAddress:{addressLine1:K||Y.addressLine1?"":"Address is required",city:K||Y.cityName?"":"City is required",state:K||Y.state?"":"State is required",country:K||Y.country?"":"Country is required",pincode:K||Y.pincode?"":"Pincode is required",residentialStatus:K||Y.residentialStatus?"":"Residential Status is required"},visaStatus:ce?"":"Visa Status is required",willingToGoAbroad:se?"":"Willing to go Abroad is required",nativePlace:oe?"":"Native place is required",citizenship:le?"":"Citizenship is required"};return{newErrors:e,hasErrors:Object.values(e.permanentAddress).some((e=>""!==e))||Object.values(e.currentAddress).some((e=>""!==e))||""!==e.visaStatus||""!==e.willingToGoAbroad||""!==e.nativePlace||""!==e.citizenship}})();if(X(l),d)return;const c=localStorage.getItem("userId");if(!c)return void console.error("User ID is required");const u=localStorage.getItem("newToken"),h={id:c,screenNumber:6,token:u,...u?{}:{userId:c},permanentAddress:{addressLine1:(null===V||void 0===V||null===(e=V.permanentAddress)||void 0===e?void 0:e.addressLine1)||"",addressLine2:(null===V||void 0===V||null===(i=V.permanentAddress)||void 0===i?void 0:i.addressLine2)||"",pincode:(null===V||void 0===V||null===(t=V.permanentAddress)||void 0===t?void 0:t.pincode)||"",cityId:null,districtId:(null===_||void 0===_?void 0:_.districtId)||null,stateId:(null===_||void 0===_?void 0:_.stateId)||null,countryId:(null===_||void 0===_?void 0:_.countryId)||null,countryName:(null===_||void 0===_?void 0:_.country)||"",stateName:_.state||"",cityName:_.cityName,latitude:null===V||void 0===V||null===(n=V.permanentAddress)||void 0===n?void 0:n.latitude,residentialStatus:(null===V||void 0===V||null===(s=V.permanentAddress)||void 0===s?void 0:s.residentialStatus)||"",longitude:(null===V||void 0===V||null===(r=V.permanentAddress)||void 0===r?void 0:r.longitude)||null},currentAddress:{addressLine1:(null===Y||void 0===Y?void 0:Y.addressLine1)||"",addressLine2:(null===Y||void 0===Y?void 0:Y.addressLine2)||"",pincode:(null===Y||void 0===Y?void 0:Y.pincode)||"",cityId:null,districtId:(null===Y||void 0===Y?void 0:Y.districtId)||null,stateId:(null===Y||void 0===Y?void 0:Y.stateId)||null,countryId:(null===Y||void 0===Y?void 0:Y.countryId)||null,countryName:(null===Y||void 0===Y?void 0:Y.country)||"",stateName:(null===Y||void 0===Y?void 0:Y.state)||"",cityName:(null===Y||void 0===Y?void 0:Y.cityName)||"",latitude:(null===Y||void 0===Y?void 0:Y.latitude)||null,longitude:(null===Y||void 0===Y?void 0:Y.longitude)||null,residentialStatus:Y.residentialStatus||""},nativePlace:oe||"",willingToGoAbroad:se||"",citizenship:le||"",visaStatus:ce||""},m=await fetch("/api/admin/users/completeUserProfileV2",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`MatrimonyAndroid|Bearer ${o}`,refreshtoken:`${a}`},body:JSON.stringify(h)});if(!m.ok)throw new Error("Failed to update profile details");const p=await m.json();console.log("Profile update successful:",p),q()}catch(o){console.error("Error in submitting form:",o.message)}},children:"Next"})]})]})]});var fe,Se},$=e=>{var i;let{title:t,progressBarLength:o,onBack:a,onNext:d,currentStepId:c,userInfo:u,setUserInfo:h}=e;const[x,A]=(0,n.useState)([]),[y,I]=(0,n.useState)(u.educationMediumId||""),[C,k]=(0,n.useState)([]),[w,D]=(0,n.useState)(u.educationTypeId||""),[E,P]=(0,n.useState)([]),[W,z]=(0,n.useState)(u.educationId||""),[M,U]=(0,n.useState)([]),[F,q]=(0,n.useState)(u.areYouWorking||""),[$,R]=(0,n.useState)(u.occupationId||""),[V,J]=(0,n.useState)([]),[_,G]=(0,n.useState)(u.designation||""),[Y,H]=(0,n.useState)([]),[K,Z]=(0,n.useState)(u.employmentTypeId||""),[Q,X]=(0,n.useState)([]),[ee,ie]=(0,n.useState)(u.annualIncome||""),[te,ne]=(0,n.useState)(u.companyName||""),[se,re]=(0,n.useState)(u.businessName||""),[oe,ae]=n.useState(null),[le,de]=n.useState(null),{showSnackBar:ce,SnackbarComponent:ue}=(0,f.d)(),[he,me]=(0,n.useState)({educationMedium:"",degreeType:"",educationDegree:"",isWorking:"",occupationType:"",designation:"",workType:"",salaryRange:"",companyName:"",businessName:""}),[pe,xe]=(0,n.useState)({educationMedium:!1,degreeType:!1,educationDegree:!1,isWorking:!1,occupationType:!1,designation:!1,workType:!1,salaryRange:!1,companyName:!1,businessName:!1}),Ae=(null===(i=t.find((e=>e.id===c)))||void 0===i?void 0:i.name)||"";(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token"),i=await fetch("/api/app/users/getMasterData",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error("Network response was not ok");const t=await i.json();console.log("Fetched data:",t),t&&t.recordList?(k(t.recordList.educationType||[]),A(t.recordList.educationMedium||[]),P(t.recordList.education||[]),J(t.recordList.occupation||[]),H(t.recordList.employmentType||[]),X(t.recordList.annualIncome||[])):console.error("Unexpected data format:",t)}catch(e){console.error("Error fetching data:",e)}})()}),[]);const ve=(e,i,t)=>n=>{const s=n.target.value;e(s),xe((e=>({...e,[i]:!1}))),me((e=>({...e,[i]:""}))),h((e=>({...e,[t]:s})))};(0,n.useEffect)((()=>{if(w){const e=C.find((e=>e.name===w));if(e){const i=E.filter((i=>i.educationTypeId===e.id));U(i)}}}),[w,E]);let ge=JSON.parse(localStorage.getItem("Credentials"));const je=(e,i,t)=>n=>{const s=n.target.value;e(s),"1"==s?ne(""):"2"==s&&re(""),xe((e=>({...e,[i]:!1}))),me((e=>({...e,[i]:""}))),h((e=>({...e,[t]:s})))};let ye;ye=localStorage.getItem("isEdit");return(0,n.useEffect)((()=>{null!==ge&&void 0!==ge&&ge.isDemoUser&&ce("**Access Denied**\nWe're sorry, but you do not have permission to access this feature.")}),[]),(0,S.jsxs)(s.A,{children:[ge.isDemoUser>0&&(0,S.jsx)(ue,{}),(0,S.jsxs)(b.A,{className:"container",children:[(0,S.jsx)(l.A,{variant:"h3",className:"title",children:Ae}),(0,S.jsx)(s.A,{className:"progress-bar-container",children:(0,S.jsx)(s.A,{className:"progress-bar",style:{width:o}})}),(0,S.jsx)(s.A,{sx:{width:"100%",mb:2,p:4},children:(0,S.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(l.A,{variant:"h3",children:"Education Details"})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Education Medium *"}),(0,S.jsxs)(v.A,{value:y,onChange:ve(I,"educationMedium","educationMediumId"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Education Medium"}),x.map((e=>(0,S.jsx)(g.A,{value:e.name,children:e.name},e.id)))]}),he.educationMedium&&(0,S.jsx)(N.A,{error:!0,children:he.educationMedium})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Education Type *"}),(0,S.jsxs)(v.A,{value:w,onChange:e=>{const i=e.target.value;D(i);const t=C.find((e=>e.name==i));if(t){const e=E.filter((e=>e.educationTypeId==t.id));U(e),z("")}else U([]),z("");xe((e=>({...e,degreeType:!1}))),me((e=>({...e,degreeType:""}))),h((e=>({...e,educationTypeId:i})))},size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Education Type"}),C.map((e=>(0,S.jsx)(g.A,{value:e.name,children:e.name},e.id)))]}),he.degreeType&&(0,S.jsx)(N.A,{error:!0,children:he.degreeType})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Education Degree *"}),(0,S.jsxs)(v.A,{value:W,onChange:ve(z,"educationDegree","educationId"),size:"small",displayEmpty:!0,renderValue:e=>{const i=M.find((i=>i.id===e));return i?i.name:"Select Degree"},children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Degree"}),M.map((e=>(0,S.jsx)(g.A,{value:e.id,children:e.name},e.id)))]}),he.educationDegree&&(0,S.jsx)(N.A,{error:!0,children:he.educationDegree})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(l.A,{variant:"h3",children:"Career Details"})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{component:"fieldset",children:[(0,S.jsx)(p.A,{children:"Are you working? *"}),(0,S.jsxs)(L.A,{value:F,onChange:je(q,"isWorking","areYouWorking"),row:!0,children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Yes"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"No"})]}),he.isWorking&&(0,S.jsx)(N.A,{error:!0,children:he.isWorking})]})}),"1"==F&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{component:"fieldset",children:[(0,S.jsx)(p.A,{children:"Occupation Type *"}),(0,S.jsxs)(L.A,{value:$,onChange:je(R,"occupationType","occupationId"),row:!0,children:[(0,S.jsx)(O.A,{value:"1",control:(0,S.jsx)(B.A,{}),label:"Job"}),(0,S.jsx)(O.A,{value:"2",control:(0,S.jsx)(B.A,{}),label:"Business"})]}),he.occupationType&&(0,S.jsx)(N.A,{error:!0,children:he.occupationType})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Designation"}),(0,S.jsxs)(v.A,{value:_,onChange:ve(G,"designation","designation"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Designation"}),V.map((e=>(0,S.jsx)(g.A,{value:e.name,children:e.name},e.id)))]}),he.designation&&(0,S.jsx)(N.A,{error:!0,children:he.designation})]})}),"1"==$?(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Company Name *"}),(0,S.jsx)(T.A,{value:te,onChange:e=>{const i=e.target.value;ne(e.target.value),h((e=>({...e,companyName:i})))},size:"small",placeholder:"Enter Company Name"}),he.companyName&&(0,S.jsx)(N.A,{error:!0,children:he.companyName})]})}):"2"==$?(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Business Name *"}),(0,S.jsx)(T.A,{value:se,onChange:e=>{const i=e.target.value;re(e.target.value),h((e=>({...e,businessName:i})))},size:"small",placeholder:"Enter Business Name"}),he.businessName&&(0,S.jsx)(N.A,{error:!0,children:he.businessName})]})}):null,(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Work Type"}),(0,S.jsxs)(v.A,{value:K,onChange:ve(Z,"workType","employmentTypeId"),size:"small",displayEmpty:!0,renderValue:e=>{const i=Y.find((i=>i.id===e));return i?i.name:"Select Work Type"},children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Work Type"}),Y.map((e=>(0,S.jsx)(g.A,{value:e.id,children:e.name},e.id)))]}),he.workType&&(0,S.jsx)(N.A,{error:!0,children:he.workType})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Salary Range"}),(0,S.jsxs)(v.A,{value:ee,onChange:ve(ie,"salaryRange","annualIncome"),size:"small",displayEmpty:!0,renderValue:e=>{const i=Q.find((i=>i.id===e));return i?i.value:"Select Education"},children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Select Salary Range"}),Q.map((e=>(0,S.jsx)(g.A,{value:e.id,children:e.value},e.id)))]}),he.salaryRange&&(0,S.jsx)(N.A,{error:!0,children:he.salaryRange})]})})]}),oe&&(0,S.jsx)(l.A,{color:"success",children:oe}),le&&(0,S.jsx)(l.A,{color:"error",children:le})]})}),(0,S.jsxs)(s.A,{className:"navigation-buttons",children:[(0,S.jsx)(j.A,{variant:"contained",onClick:a,children:"Back"}),(0,S.jsx)(j.A,{variant:"contained",onClick:"1"==ge.isDemoUser?d:async()=>{if((()=>{const e={educationMedium:""===y,degreeType:""===w,educationDegree:""===W,isWorking:""===F,occupationType:"1"===F&&""===$,designation:"1"===F&&""===_,workType:"1"===F&&""===K,salaryRange:"1"===F&&""===ee,companyName:"1"===$&&""===te,businessName:"2"===$&&""===se},i={educationMedium:""===y?"Education medium is required":"",degreeType:""===w?"Education type is required":"",educationDegree:""===W?"Education degree is required":"",isWorking:""===F?"Employment status is required":"",occupationType:"1"===F&&""===$?"Occupation type is required":"",designation:"1"===F&&""===_?"Designation is required":"",workType:"1"===F&&""===K?"Work type is required":"",salaryRange:"1"===F&&""===ee?"Salary range is required":"",companyName:"1"===$&&""===te?"Company name is required":"",businessName:"2"===$&&""===se?"Business name is required":""};return xe(e),me(i),!Object.values(e).some((e=>e))})()){var e,i;const n=localStorage.getItem("userId"),s=localStorage.getItem("newToken"),r=localStorage.getItem("rtoken"),o=localStorage.getItem("newToken"),a={id:n,screenNumber:7,educationTypeId:(null===(e=C.find((e=>e.name===u.educationTypeId)))||void 0===e?void 0:e.id)||null,educationMediumId:(null===(i=x.find((e=>e.name===u.educationMediumId)))||void 0===i?void 0:i.id)||null,educationId:u.educationId,areYouWorking:u.areYouWorking,occupationId:u.occupationId||null,designation:u.designation,employmentTypeId:u.employmentTypeId,companyName:te||null,businessName:se||null,annualIncomeId:u.annualIncomeId,token:o,...o?{}:{userId:n}};try{if(!(await fetch("/api/admin/users/completeUserProfileV2",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`MatrimonyAndroid|Bearer ${s}`,refreshtoken:`${r}`},body:JSON.stringify(a)})).ok)throw new Error("Failed to update profile with Step 7 data");ae("Profile updated successfully for Step 7"),d()}catch(t){de(t.message)}}},children:"Next"})]})]})]})};var R=t(60784),V=t(47257),J=t(58390);const _=e=>{var i;let{title:t,progressBarLength:r,onBack:o,onNext:a,configData:d,currentStepId:c,userInfo:u,setUserInfo:h}=e;const[x,A]=(0,n.useState)(u.horoscopeBelief||""),[y,I]=(0,n.useState)(""),[C,k]=(0,n.useState)(u.birthCountryId||""),[w,D]=(0,n.useState)([]),[E,P]=(0,n.useState)(u.birthCityId||""),[W,z]=(0,n.useState)([]),[M,U]=(0,n.useState)(u.zodiacSign||""),F=localStorage.getItem("SessionToken"),[q,$]=n.useState(u.timeOfBirth||null),[_,G]=(0,n.useState)(u.manglik||""),[Y,H]=(0,n.useState)({}),{showSnackBar:K,SnackbarComponent:Z}=(0,f.d)(),Q=localStorage.getItem("userId"),X=(null===(i=t.find((e=>e.id===c)))||void 0===i?void 0:i.name)||"";(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("SessionToken"),i=(localStorage.getItem("newToken"),await fetch("/api/admin/region/getCountriesV2",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({userId:Q})}));if(!i.ok)throw new Error("Network response was not ok for countries");const t=await i.json();console.log("Fetched data from getCountries:",t),t&&t.recordList?D(t.recordList):console.error("Unexpected data format from getCountries:",t);const n=await fetch("/api/admin/cities/getCitiesV2",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({fetchRecord:10,startIndex:0,userId:Q})});if(!n.ok)throw new Error("Network response was not ok for city");const s=await n.json();console.log("Fetched data from getcitys:",s),s&&s.recordList?z(s.recordList):console.error("Unexpected data format from getcitys:",s)}catch(e){console.error("Error fetching data:",e)}})()}),[]);let ee=JSON.parse(localStorage.getItem("Credentials"));const ie=async e=>{try{const i=await fetch("/api/admin/cities/getCitiesV2",{method:"POST",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"},body:JSON.stringify({fetchRecord:10,startIndex:0,searchString:String(e),userId:Q})});if(!i.ok)throw new Error("Network response was not ok for city");const t=await i.json();console.log("Fetched data from getcitys:",t),t&&t.recordList?z(t.recordList):console.error("Unexpected data format from getcitys:",t)}catch(i){console.error("Error fetching data:",i)}};let te;te=localStorage.getItem("isEdit");return(0,n.useEffect)((()=>{null!==ee&&void 0!==ee&&ee.isDemoUser&&K("**Access Denied**\nWe're sorry, but you do not have permission to access this feature.")}),[]),(0,S.jsxs)(s.A,{children:[ee.isDemoUser>0&&(0,S.jsx)(Z,{}),(0,S.jsxs)(b.A,{className:"container",children:[(0,S.jsx)(l.A,{variant:"h3",className:"title",children:X}),(0,S.jsx)(s.A,{className:"progress-bar-container",children:(0,S.jsx)(s.A,{className:"progress-bar",style:{width:r}})}),(0,S.jsxs)(s.A,{sx:{width:"100%",mb:2,p:4},children:[(0,S.jsxs)(m.A,{component:"fieldset",children:[(0,S.jsx)(p.A,{component:"legend",children:"Horoscope Belief *"}),(0,S.jsxs)(L.A,{name:"horoscopeBelief",value:x,onChange:e=>{A(e.target.value);const i=e.target.value;H((e=>({...e,horoscopeBelief:""}))),h((e=>({...e,horoscopeBelief:i})))},row:!0,children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Yes"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"No"}),(0,S.jsx)(O.A,{value:0,control:(0,S.jsx)(B.A,{}),label:"Doesn't Matter"})]}),Y.horoscopeBelief&&(0,S.jsx)(N.A,{error:!0,children:Y.horoscopeBelief})]}),"1"==x&&(0,S.jsxs)(s.A,{mt:2,children:[(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Country of Birth *"}),(0,S.jsxs)(v.A,{value:C,onChange:e=>{const i=e.target.value;k(i),H((e=>({...e,countryOfBirth:""}))),h((e=>({...e,birthCountryId:i})))},size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your country of birth"}),w.map((e=>(0,S.jsx)(g.A,{value:e.id,children:e.name},e.id)))]}),Y.countryOfBirth&&(0,S.jsx)(N.A,{error:!0,children:Y.countryOfBirth})]}),(0,S.jsxs)(m.A,{fullWidth:!0,sx:{mt:2},children:[(0,S.jsx)(p.A,{children:"City of Birth *"}),(0,S.jsxs)(v.A,{labelId:"demo-city-label",id:"demo-city-label",value:E,onChange:e=>{const i=e.target.value;P(i),H((e=>({...e,cityOfBirth:""}))),h((e=>({...e,birthCityId:i})))},size:"small",displayEmpty:!0,onClick:e=>{e.stopPropagation()},children:[(0,S.jsx)(g.A,{children:(0,S.jsx)(T.A,{placeholder:"Search city...",variant:"outlined",size:"small",fullWidth:!0,autoFocus:!0,onChange:e=>(e=>{const i=e.target.value;I(i),ie(i)})(e),value:y,onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation()})}),W.map((e=>(0,S.jsx)(g.A,{value:e.id,children:e.name},e.id)))]}),Y.cityOfBirth&&(0,S.jsx)(N.A,{error:!0,children:Y.cityOfBirth})]}),(0,S.jsxs)(m.A,{fullWidth:!0,sx:{mt:2},children:[(0,S.jsx)(p.A,{children:"Zodiac Sign *"}),(0,S.jsxs)(v.A,{value:M,onChange:(ne=U,se="zodiacSign",e=>{ne(e.target.value);const i=e.target.value;H((e=>({...e,[se]:""}))),h((e=>({...e,zodiacSign:i})))}),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your zodiac sign"}),d.zodiacSignList.map((e=>(0,S.jsx)(g.A,{value:e,children:e},e)))]}),Y.zodiacSign&&(0,S.jsx)(N.A,{error:!0,children:Y.zodiacSign})]}),(0,S.jsx)(J.$,{dateAdapter:V.A,children:(0,S.jsxs)(m.A,{fullWidth:!0,sx:{mt:2},children:[(0,S.jsx)(p.A,{children:"Time of Birth *"}),(0,S.jsx)(R.o,{value:q,onChange:((e,i)=>t=>{e(t),H((e=>({...e,[i]:""}))),h((e=>({...e,timeOfBirth:t})))})($,"timeOfBirth"),renderInput:e=>(0,S.jsx)(T.A,{...e,size:"small"}),ampm:!0}),Y.timeOfBirth&&(0,S.jsx)(N.A,{error:!0,children:Y.timeOfBirth})]})}),(0,S.jsxs)(m.A,{component:"fieldset",sx:{mt:2},children:[(0,S.jsx)(p.A,{component:"legend",children:"Manglik "}),(0,S.jsxs)(L.A,{name:"manglik",value:_,onChange:e=>{G(e.target.value);const i=e.target.value;H((e=>({...e,manglik:""}))),h((e=>({...e,manglik:i})))},row:!0,children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Yes"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"No"}),(0,S.jsx)(O.A,{value:0,control:(0,S.jsx)(B.A,{}),label:"Doesn't Matter"})]}),Y.manglik&&(0,S.jsx)(N.A,{error:!0,children:Y.manglik})]})]})]}),(0,S.jsxs)(s.A,{className:"navigation-buttons",children:[(0,S.jsx)(j.A,{variant:"contained",onClick:o,children:"Back"}),(0,S.jsx)(j.A,{variant:"contained",onClick:"1"==ee.isDemoUser?a:async()=>{const e={};if(x||(e.horoscopeBelief="Horoscope Belief is required"),"1"===x&&(C||(e.countryOfBirth="Country of Birth is required"),E||(e.cityOfBirth="City of Birth is required"),M||(e.zodiacSign="Zodiac Sign is required"),q||(e.timeOfBirth="Time of Birth is required"),_||(e.manglik="Manglik is required")),"2"!==x&&"0"!==x)if(Object.keys(e).length>0)H(e);else try{const e=localStorage.getItem("userId"),i=localStorage.getItem("newToken"),t=localStorage.getItem("newToken"),n={id:e,horoscopeBelief:u.horoscopeBelief,birthCountryId:u.birthCountryId,birthCityId:u.birthCityId,zodiacSign:u.zodiacSign,timeOfBirth:u.timeOfBirth,manglik:u.manglik,screenNumber:8,token:t,...t?{}:{userId:e}},s=await fetch("/api/admin/users/completeUserProfileV2",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(!s.ok){const e=await s.json();return void H((i=>({...i,apiError:e.message||"An error occurred."})))}a()}catch(i){console.error("Error submitting astrologic details:",i),H((e=>({...e,apiError:"An error occurred while submitting."})))}else try{const e=localStorage.getItem("newToken"),i=localStorage.getItem("newToken"),t={id:Q,horoscopeBelief:x,screenNumber:8,token:i,...i?{}:{userId:Q}},n=await fetch("/api/admin/users/completeUserProfileV2",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const e=await n.json();return void H((i=>({...i,apiError:e.message||"An error occurred."})))}a()}catch(i){console.error("Error submitting astrologic details:",i),H((e=>({...e,apiError:"An error occurred while submitting."})))}},children:"Next"})]})]})]});var ne,se},G=e=>{var i;let{title:t,progressBarLength:o,onBack:a,onNext:d,configData:c,currentStepId:u,userInfo:h,setUserInfo:x}=e;const[A,y]=(0,n.useState)(h.diet||""),[I,C]=(0,n.useState)(h.drinking||""),[k,T]=(0,n.useState)(h.smoking||""),[N,w]=n.useState(null),[D,E]=n.useState(null),[L,O]=(0,n.useState)({}),{showSnackBar:B,SnackbarComponent:P}=(0,f.d)(),W=(null===(i=t.find((e=>e.id===u)))||void 0===i?void 0:i.name)||"",z=(e,i)=>t=>{const n=t.target.value;e(n),O((e=>({...e,[t.target.name]:""}))),x((e=>({...e,[i]:n})))};let M;M=localStorage.getItem("isEdit");let U=JSON.parse(localStorage.getItem("Credentials"));return(0,n.useEffect)((()=>{null!==U&&void 0!==U&&U.isDemoUser&&B("**Access Denied**\nWe're sorry, but you do not have permission to access this feature.")}),[]),(0,S.jsxs)(s.A,{children:[U.isDemoUser>0&&(0,S.jsx)(P,{}),(0,S.jsxs)(b.A,{className:"container",children:[(0,S.jsx)(l.A,{variant:"h3",className:"title",children:W}),(0,S.jsx)(s.A,{className:"progress-bar-container",children:(0,S.jsx)(s.A,{className:"progress-bar",style:{width:o}})}),(0,S.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Diet *"}),(0,S.jsxs)(v.A,{name:"diet",value:A,onChange:z(y,"diet"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your diet"}),c.dietTypeList.map((e=>(0,S.jsx)(g.A,{value:e.name,children:e.name},e.id)))]}),L.diet&&(0,S.jsx)(l.A,{color:"error",children:L.diet})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Drink *"}),(0,S.jsxs)(v.A,{name:"drink",value:I,onChange:z(C,"drinking"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your drink preference"}),c.drinkTypeList.map((e=>(0,S.jsx)(g.A,{value:e,children:e},e)))]}),L.drink&&(0,S.jsx)(l.A,{color:"error",children:L.drink})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Smoker *"}),(0,S.jsxs)(v.A,{name:"smoker",value:k,onChange:z(T,"smoking"),size:"small",displayEmpty:!0,children:[(0,S.jsx)(g.A,{value:"",disabled:!0,children:"Please select your smoking preference"}),c.smokeTypeList.map((e=>(0,S.jsx)(g.A,{value:e,children:e},e)))]}),L.smoker&&(0,S.jsx)(l.A,{color:"error",children:L.smoker})]})}),N&&(0,S.jsx)(l.A,{color:"success",children:N}),D&&(0,S.jsx)(l.A,{color:"error",children:D})]}),(0,S.jsxs)(s.A,{className:"navigation-buttons",children:[(0,S.jsx)(j.A,{variant:"contained",onClick:a,children:"Back"}),(0,S.jsx)(j.A,{variant:"contained",onClick:"1"==U.isDemoUser?d:async()=>{if((()=>{let e=!0;const i={};return A||(i.diet="Diet is required",e=!1),I||(i.drink="Drink preference is required",e=!1),k||(i.smoker="Smoking preference is required",e=!1),O(i),e})()){var e;const t=localStorage.getItem("userId"),n=localStorage.getItem("newToken"),s=localStorage.getItem("rtoken"),r=localStorage.getItem("newToken"),o={id:t,screenNumber:9,dietId:(null===(e=c.dietTypeList.find((e=>e.name===h.diet)))||void 0===e?void 0:e.id)||null,smoking:h.smoking,drinking:h.drinking,token:r,...r?{}:{userId:t}};try{if(!(await fetch("/api/admin/users/completeUserProfileV2",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`MatrimonyAndroid|Bearer ${n}`,refreshtoken:`${s}`},body:JSON.stringify(o)})).ok)throw new Error("Failed to update profile with Step 9 data");w("Profile updated successfully for Step 9"),d()}catch(i){E(i.message)}}},children:"Next"})]})]})]})};var Y=t(48734),H=t(74050),K=t(99070),Z=t(85271);const Q=e=>{var i;let{title:t,progressBarLength:o,onBack:a,onNext:d,configData:c,currentStepId:u,userInfo:h,setUserInfo:x}=e;const[A,y]=(0,n.useState)([18,32]),[I,C]=(0,n.useState)([150,180]),[k,N]=(0,n.useState)(h.pMaritalStatusId||[]),[w,D]=(0,n.useState)(!1),[E,W]=(0,n.useState)(h.pProfileWithChildren||""),[z,M]=(0,n.useState)(h.pFamilyType||""),[F,q]=(0,n.useState)(h.pReligionId||[]),[$,R]=(0,n.useState)([]),[V,J]=(0,n.useState)(!1),[_,G]=(0,n.useState)(h.pCommunityId||[]),[Q,X]=(0,n.useState)([]),[ee,ie]=(0,n.useState)(!1),[te,ne]=(0,n.useState)(h.pHoroscopeBelief||""),[se,re]=(0,n.useState)(h.pManglikMatch||""),[oe,ae]=(0,n.useState)(h.pSmokingAcceptance||""),[le,de]=(0,n.useState)(h.pAlcoholAcceptance||""),[ce,ue]=(0,n.useState)(h.pDisabilityAcceptance||""),[he,me]=(0,n.useState)(h.pCountryLivingInId||[]),[pe,xe]=(0,n.useState)([]),[Ae,ve]=(0,n.useState)(!1),[ge,je]=(0,n.useState)(h.pStateLivingInId||[]),[ye,fe]=(0,n.useState)([]),[Se,Ie]=(0,n.useState)(!1),[be,Ce]=(0,n.useState)(h.pCityLivingInId||[]),[ke,Te]=(0,n.useState)([]),[Ne,we]=(0,n.useState)(!1),[De,Ee]=(0,n.useState)(""),[Le,Oe]=(0,n.useState)(h.pEducationTypeId||[]),[Be,Pe]=(0,n.useState)([]),[We,ze]=(0,n.useState)(!1),[Me,Ue]=(0,n.useState)(h.pEducationMediumId||[]),[Fe,qe]=(0,n.useState)([]),[$e,Re]=(0,n.useState)(!1),[Ve,Je]=(0,n.useState)(h.pOccupationId||[]),[_e,Ge]=(0,n.useState)([]),[Ye,He]=(0,n.useState)(!1),[Ke,Ze]=(0,n.useState)(h.pEmploymentTypeId||[]),[Qe,Xe]=(0,n.useState)([]),[ei,ii]=(0,n.useState)(!1),[ti,ni]=(0,n.useState)(h.pAnnualIncomeId||[]),[si,ri]=(0,n.useState)([]),[oi,ai]=(0,n.useState)(!1),[li,di]=(0,n.useState)(""),[ci,ui]=(0,n.useState)(h.pMotherTongue||[]),[hi,mi]=(0,n.useState)(h.pDietId||[]),[pi,xi]=(0,n.useState)(!1),[Ai,vi]=(0,n.useState)(h.pComplexion||[]),[gi,ji]=(0,n.useState)(!1),[yi,fi]=(0,n.useState)(h.pBodyType||[]),[Si,Ii]=(0,n.useState)(!1),[bi,Ci]=(0,n.useState)(h.pOtherExpectations||""),[ki,Ti]=n.useState(null),[Ni,wi]=n.useState(null),[Di,Ei]=(0,n.useState)({}),{showSnackBar:Li,SnackbarComponent:Oi}=(0,f.d)(),[Bi,Pi]=(0,n.useState)(!0),[Wi,zi]=(0,n.useState)([]),[Mi,Ui]=(0,n.useState)([]),[Fi,qi]=(0,n.useState)(!0),[$i,Ri]=(0,n.useState)(""),Vi=localStorage.getItem("userId");let Ji=JSON.parse(localStorage.getItem("Credentials"));const _i=e=>{"martial"===e?D(!0):"religion"===e?J(!0):"caste"===e?ie(!0):"country"===e?ve(!0):"state"===e?Ie(!0):"city"===e?we(!0):"qualification"===e?ze(!0):"educationMedium"===e?Re(!0):"profession"===e?He(!0):"workingWith"===e?ii(!0):"annualIncome"===e?ai(!0):"diet"===e?xi(!0):"complexion"===e?ji(!0):"bodyType"===e&&Ii(!0)},Gi=()=>{D(!1),J(!1),ie(!1),ve(!1),Ie(!1),we(!1),ze(!1),Re(!1),He(!1),ii(!1),ai(!1),xi(!1),ji(!1),Ii(!1)},Yi=()=>{D(!1),J(!1),ie(!1),ve(!1),Ie(!1),we(!1),ze(!1),Re(!1),He(!1),ii(!1),ai(!1),xi(!1),ji(!1),Ii(!1)};(0,n.useEffect)((()=>{(async()=>{try{localStorage.getItem("token");const e=localStorage.getItem("SessionToken"),i=await fetch("/api/app/users/getMasterData",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error("Network response was not ok");const t=await i.json();t&&t.recordList?(R(t.recordList.religion),Pe(t.recordList.educationType),qe(t.recordList.educationMedium),Ge(t.recordList.occupation),Xe(t.recordList.employmentType),ri(t.recordList.annualIncome),X(t.recordList.community)):console.error("Unexpected data format from getMasterData:",t);const n=await fetch("/api/admin/region/getCountriesV2",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({userId:Vi})});if(!n.ok)throw new Error("Network response was not ok for countries");const s=await n.json();s&&s.recordList?xe(s.recordList):console.error("Unexpected data format from getCountries:",s)}catch(e){console.error("Error fetching data:",e)}})()}),[]);const Hi=(null===(i=t.find((e=>e.id===u)))||void 0===i?void 0:i.name)||"",Ki=(e,i)=>t=>{const n=t.target.value;e(t.target.value),Ei((e=>({...e,[t.target.name]:""}))),x((e=>({...e,[i]:n})))};(0,n.useEffect)((()=>{he.length>0&&Zi(he)}),[he]),(0,n.useEffect)((()=>{ge.length>0&&Qi(ge)}),[ge]),(0,n.useEffect)((()=>{var e;const i=null===h||void 0===h||null===(e=h.pCityLivingInId)||void 0===e?void 0:e.map((e=>{var i;return null===(i=Wi.find((i=>(null===i||void 0===i?void 0:i.id)==e)))||void 0===i?void 0:i.name}));Ui(i)}),[null===h||void 0===h?void 0:h.pCityLivingInId,Bi]);const Zi=async e=>{try{const i=localStorage.getItem("SessionToken"),t=await fetch("/api/admin/states/getStatesV2",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({countryId:e,userId:Vi})});if(!t.ok)throw new Error("Error fetching states");const n=await t.json();n&&n.recordList?fe(n.recordList):console.error("Unexpected state data:",n)}catch(i){console.error("Error fetching states by countries:",i)}},Qi=async e=>{try{const i=localStorage.getItem("SessionToken"),t=await fetch("/api/admin/cities/getCitiesV2",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({stateId:e,userId:Vi})});if(!t.ok)throw new Error("Error fetching cities");const n=await t.json();n&&n.recordList?(zi(null===n||void 0===n?void 0:n.recordList),Te(n.recordList),Pi(!1)):console.error("Unexpected city data:",n)}catch(i){console.error("Error fetching cities by states:",i)}qi(!1)},Xi=(0,n.useMemo)((()=>Wi.filter((e=>e.name.toLowerCase().includes($i.toLowerCase())))),[Wi,$i]),et=(e,i)=>{const{value:t}=e.target;Ui("string"===typeof t?t.split(","):t)},it=(e,i)=>{Ui((function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.includes(e.name)?i.filter((i=>i!==e.name)):[...i,e.name]})),tt(e)},tt=e=>{x((i=>{const t=i.pCityLivingInId||[],n=t.includes(e.id)?t.filter((i=>i!==e.id)):[...t,e.id];return{...i,pCityLivingInId:n}}))},nt=e=>{if(!ci.includes(e)){const i=[...ci,e];ui(i),x((e=>({...e,pMotherTongue:i}))),Ei((e=>({...e,selectedLanguages:""})))}di("")};(0,n.useEffect)((()=>{h.pMotherTongue&&ui(h.pMotherTongue)}),[h.pMotherTongue]);const st=c.languages.filter((e=>e.toLowerCase().includes(li.toLowerCase()))),rt=(e,i)=>t=>{const n=t.target.value;n.includes(0)?e([0]):e(n.filter((e=>0!==e))),Ei((e=>({...e,[t.target.name]:""}))),x((e=>({...e,[i]:n})))},ot=(e,i)=>t=>{const n=t.target.value;n.includes("0")?e(["0"]):e(n.filter((e=>"0"!==e))),Ei((e=>({...e,[t.target.name]:""}))),x((e=>({...e,[i]:n})))},at=ke.filter((e=>e.name.toLowerCase().includes(De.toLowerCase())));let lt;lt=localStorage.getItem("isEdit");return(0,n.useEffect)((()=>{null!==Ji&&void 0!==Ji&&Ji.isDemoUser&&Li("**Access Denied**\nWe're sorry, but you do not have permission to access this feature.")}),[]),(0,S.jsxs)(s.A,{children:[Ji.isDemoUser>0&&(0,S.jsx)(Oi,{}),(0,S.jsxs)(b.A,{className:"container",children:[(0,S.jsx)(l.A,{variant:"h3",className:"title",children:Hi}),(0,S.jsx)(s.A,{className:"progress-bar-container",children:(0,S.jsx)(s.A,{className:"progress-bar",style:{width:o}})}),(0,S.jsx)(s.A,{sx:{width:"100%",mb:2,p:4},children:(0,S.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(l.A,{variant:"h3",children:"Preffered Apperance"})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Age Range"}),(0,S.jsx)(K.Ay,{value:A,onChange:(e,i)=>y(i),valueLabelDisplay:"auto",min:18,max:60}),(0,S.jsxs)(l.A,{children:[A[0]," - ",A[1]," years"]})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Height Range"}),(0,S.jsx)(K.Ay,{value:I,onChange:(e,i)=>C(i),valueLabelDisplay:"auto",min:140,max:200}),(0,S.jsxs)(l.A,{children:[I[0]," - ",I[1]," cm"]})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Marital Status *"}),(0,S.jsxs)(v.A,{name:"martialStatus",multiple:!0,value:k,onChange:rt(N,"pMaritalStatusId"),input:(0,S.jsx)(H.A,{}),size:"small",renderValue:e=>{if(e.includes(0))return"Open For All";return c.maritalStatus.filter((i=>e.includes(i.id))).map((e=>e.name)).join(", ")},open:w,onClose:Gi,onOpen:()=>_i("martial"),children:[(0,S.jsxs)(g.A,{value:0,children:[(0,S.jsx)(U.A,{checked:k.includes(0)})," Open For All"]}),c.maritalStatus.map((e=>(0,S.jsxs)(g.A,{value:e.id,children:[(0,S.jsx)(U.A,{checked:k.indexOf(e.id)>-1}),e.name]},e.id))),(0,S.jsx)("div",{className:"donebutton",children:(0,S.jsx)(j.A,{variant:"contained",onClick:Yi,children:"Done"})})]}),Di.martialStatus&&(0,S.jsx)(l.A,{color:"error",children:Di.martialStatus})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Profile with Children *"}),(0,S.jsxs)(L.A,{name:"profileWithChildren",value:E,onChange:Ki(W,"pProfileWithChildren"),row:!0,children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Yes"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"Yes, if they live separately"}),(0,S.jsx)(O.A,{value:3,control:(0,S.jsx)(B.A,{}),label:"No"})]}),Di.profileWithChildren&&(0,S.jsx)(l.A,{color:"error",children:Di.profileWithChildren})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Preferred Living Status *"}),(0,S.jsxs)(L.A,{name:"preferredLivingStatus",value:z,onChange:Ki(M,"pFamilyType"),row:!0,children:[(0,S.jsx)(O.A,{value:"Joint Family",control:(0,S.jsx)(B.A,{}),label:"Joint Family"}),(0,S.jsx)(O.A,{value:"Nuclear",control:(0,S.jsx)(B.A,{}),label:"Nuclear"}),(0,S.jsx)(O.A,{value:"Doesn't matter",control:(0,S.jsx)(B.A,{}),label:"Doesn't matter"})]}),Di.preferredLivingStatus&&(0,S.jsx)(l.A,{color:"error",children:Di.preferredLivingStatus})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(l.A,{variant:"h3",children:"Preffered Community Details"})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Religion *"}),(0,S.jsxs)(v.A,{name:"religion",multiple:!0,value:F,onChange:e=>{const i=e.target.value;i.includes(0)?q([0]):q(i.filter((e=>0!==e))),Ei((e=>({...e,religion:""}))),x((e=>({...e,pReligionId:i})))},input:(0,S.jsx)(H.A,{}),renderValue:e=>{if(e.includes(0))return"Open For All";return $.filter((i=>e.includes(i.id))).map((e=>e.name)).join(", ")},size:"small",open:V,onClose:Gi,onOpen:()=>_i("religion"),children:[(0,S.jsx)(g.A,{disabled:!0,children:"Select Religion"}),(0,S.jsxs)(g.A,{value:0,children:[(0,S.jsx)(U.A,{checked:F.includes(0)})," Open For All"]}),$.map((e=>(0,S.jsxs)(g.A,{value:e.id,children:[(0,S.jsx)(U.A,{checked:F.indexOf(e.id)>-1}),e.name]},e.id))),(0,S.jsx)("div",{className:"donebutton",children:(0,S.jsx)(j.A,{variant:"contained",onClick:Yi,children:"Done"})})]}),Di.religion&&(0,S.jsx)(l.A,{color:"error",children:Di.religion})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Caste *"}),(0,S.jsxs)(v.A,{name:"caste",multiple:!0,value:_,onChange:e=>{const i=e.target.value;i.includes(0)?G([0]):G(i.filter((e=>0!==e))),Ei((e=>({...e,caste:""}))),x((e=>({...e,pCommunityId:i})))},input:(0,S.jsx)(H.A,{}),renderValue:e=>{if(e.includes(0))return"Open For All";return Q.filter((i=>e.includes(i.id))).map((e=>e.name)).join(", ")},size:"small",open:ee,onClose:Gi,onOpen:()=>_i("caste"),children:[(0,S.jsxs)(g.A,{value:0,children:[(0,S.jsx)(U.A,{checked:_.includes(0)})," Open For All"]}),Q.map((e=>(0,S.jsxs)(g.A,{value:e.id,children:[(0,S.jsx)(U.A,{checked:_.indexOf(e.id)>-1}),e.name]},e.id))),(0,S.jsx)("div",{className:"donebutton",children:(0,S.jsx)(j.A,{variant:"contained",onClick:Yi,children:"Done"})})]}),Di.caste&&(0,S.jsx)(l.A,{color:"error",children:Di.caste})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Mother Tounge *"}),(0,S.jsx)(T.A,{value:li,onChange:e=>{di(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&li&&(nt(li),null===e||void 0===e||e.preventDefault())},placeholder:"e.g English, Hindi",size:"small"}),li&&(0,S.jsx)(s.A,{children:st.map((e=>(0,S.jsx)(P.A,{label:e,onClick:()=>nt(e),style:{margin:"2px"}},e)))}),(0,S.jsx)(s.A,{mt:1,children:ci.map((e=>(0,S.jsx)(P.A,{label:e,onDelete:()=>(e=>{const i=ci.filter((i=>i!==e));ui(i),x((e=>({...e,pMotherTongue:i})))})(e),color:"primary",style:{margin:"2px"}},e)))}),Di.selectedLanguages&&(0,S.jsx)(l.A,{color:"error",children:Di.selectedLanguages})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(l.A,{variant:"h3",children:"Preffered Astrological Details"})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Horoscope Belief *"}),(0,S.jsxs)(L.A,{name:"horoscopeBelief",value:te,onChange:Ki(ne,"pHoroscopeBelief"),row:!0,children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Yes"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"No"}),(0,S.jsx)(O.A,{value:0,control:(0,S.jsx)(B.A,{}),label:"Doesn't matter"})]}),Di.horoscopeBelief&&(0,S.jsx)(l.A,{color:"error",children:Di.horoscopeBelief})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Manglik Belief *"}),(0,S.jsxs)(L.A,{name:"manglikBelief",value:se,onChange:Ki(re,"pManglikMatch"),row:!0,children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Yes"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"No"}),(0,S.jsx)(O.A,{value:0,control:(0,S.jsx)(B.A,{}),label:"Doesn't matter"})]}),Di.manglikBelief&&(0,S.jsx)(l.A,{color:"error",children:Di.manglikBelief})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(l.A,{variant:"h3",children:"Preffered Location"})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Country *"}),(0,S.jsxs)(v.A,{name:"country",multiple:!0,value:he,onChange:async e=>{const i=e.target.value;me(i),Ei((e=>({...e,country:""}))),i.length>0?await Zi(i):(fe([]),Te([])),x((e=>({...e,pCountryLivingInId:i})))},input:(0,S.jsx)(H.A,{}),renderValue:e=>pe.filter((i=>e.includes(i.id))).map((e=>e.name)).join(", "),size:"small",open:Ae,onClose:Gi,onOpen:()=>_i("country"),children:[pe.map((e=>(0,S.jsxs)(g.A,{value:e.id,children:[(0,S.jsx)(U.A,{checked:he.indexOf(e.id)>-1}),e.name]},e.id))),(0,S.jsx)("div",{className:"donebutton",children:(0,S.jsx)(j.A,{variant:"contained",onClick:Yi,children:"Done"})})]}),Di.country&&(0,S.jsx)(l.A,{color:"error",children:Di.country})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"State *"}),(0,S.jsx)(v.A,{name:"state",multiple:!0,value:Array.isArray(ge)?ge:[],onChange:async e=>{const i=e.target.value;console.info("selectedStates-----\x3e",i),je(Array.isArray(i)?i:[]),Ei((e=>({...e,state:""}))),i.length>0?await Qi(i):Te([]),x((e=>({...e,pStateLivingInId:i})))},input:(0,S.jsx)(H.A,{}),renderValue:e=>ye.filter((i=>e.includes(i.id))).map((e=>e.name)).join(", "),size:"small",open:Se,onClose:Gi,onOpen:()=>_i("state"),children:ye.map((e=>(0,S.jsxs)(g.A,{value:e.id,children:[(0,S.jsx)(U.A,{checked:(null===ge||void 0===ge?void 0:ge.indexOf(e.id))>-1}),e.name]},e.id)))}),Di.state&&(0,S.jsx)(l.A,{color:"error",children:Di.state})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"City *"}),Fi?(0,S.jsx)(v.A,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",size:"small",value:"",onChange:e=>et(e)}):(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(v.A,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,size:"small",value:Array.isArray(Mi)?Mi:[],onChange:e=>et(e),input:(0,S.jsx)(H.A,{}),renderValue:()=>null===Mi||void 0===Mi?void 0:Mi.join(","),MenuProps:{PaperProps:{style:{maxHeight:200}}},children:[(0,S.jsx)(T.A,{placeholder:"Search City",variant:"outlined",size:"small",fullWidth:!0,margin:"dense",onChange:e=>Ri(e.target.value)}),(0,S.jsx)(Z.Y1,{height:150,itemCount:at.length,itemSize:48,width:"100%",children:e=>{let{index:i,style:t}=e;const n=Xi[i],s=null===Mi||void 0===Mi?void 0:Mi.includes(null===n||void 0===n?void 0:n.name);n&&"object"===typeof n&&Object.entries(n).length;return(0,S.jsx)(g.A,{value:null===n||void 0===n?void 0:n.id,style:t,onClick:e=>it(n,e),children:null!==n&&void 0!==n&&n.name?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(U.A,{checked:s}),(0,S.jsx)(Y.A,{primary:null===n||void 0===n?void 0:n.name})]}):null},null===n||void 0===n?void 0:n.name)}})]})}),Di.city&&(0,S.jsx)(l.A,{color:"error",children:Di.city})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(l.A,{variant:"h3",children:"Preffered Education Details"})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Qualification *"}),(0,S.jsxs)(v.A,{name:"qualification",multiple:!0,value:Le,onChange:rt(Oe,"pEducationTypeId"),input:(0,S.jsx)(H.A,{}),renderValue:e=>{if(e.includes(0))return"Open For All";return Be.filter((i=>e.includes(i.id))).map((e=>e.name)).join(", ")},size:"small",open:We,onClose:Gi,onOpen:()=>_i("qualification"),children:[(0,S.jsxs)(g.A,{value:0,children:[(0,S.jsx)(U.A,{checked:Le.includes(0)})," Open For All"]}),Be.map((e=>(0,S.jsxs)(g.A,{value:e.id,children:[(0,S.jsx)(U.A,{checked:Le.indexOf(e.id)>-1}),e.name]},e.id))),(0,S.jsx)("div",{className:"donebutton",children:(0,S.jsx)(j.A,{variant:"contained",onClick:Yi,children:"Done"})})]}),Di.qualification&&(0,S.jsx)(l.A,{color:"error",children:Di.qualification})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Education Medium *"}),(0,S.jsxs)(v.A,{name:"educationMedium",multiple:!0,value:Me,onChange:rt(Ue,"pEducationMediumId"),input:(0,S.jsx)(H.A,{}),renderValue:e=>{if(e.includes(0))return"Open For All";return Fe.filter((i=>e.includes(i.id))).map((e=>e.name)).join(", ")},size:"small",open:$e,onClose:Gi,onOpen:()=>_i("educationMedium"),children:[(0,S.jsxs)(g.A,{value:0,children:[(0,S.jsx)(U.A,{checked:Me.includes(0)})," Open For All"]}),Fe.map((e=>(0,S.jsxs)(g.A,{value:e.id,children:[(0,S.jsx)(U.A,{checked:Me.indexOf(e.id)>-1}),e.name]},e.id))),(0,S.jsx)("div",{className:"donebutton",children:(0,S.jsx)(j.A,{variant:"contained",onClick:Yi,children:"Done"})})]}),Di.educationMedium&&(0,S.jsx)(l.A,{color:"error",children:Di.educationMedium})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Profession *"}),(0,S.jsxs)(v.A,{name:"profession",multiple:!0,value:Ve,onChange:rt(Je,"pOccupationId"),input:(0,S.jsx)(H.A,{}),renderValue:e=>{if(e.includes(0))return"Open For All";return _e.filter((i=>e.includes(i.id))).map((e=>e.name)).join(", ")},size:"small",open:Ye,onClose:Gi,onOpen:()=>_i("profession"),children:[(0,S.jsxs)(g.A,{value:0,children:[(0,S.jsx)(U.A,{checked:Ve.includes(0)})," Open For All"]}),_e.map((e=>(0,S.jsxs)(g.A,{value:e.id,children:[(0,S.jsx)(U.A,{checked:Ve.indexOf(e.id)>-1}),e.name]},e.id))),(0,S.jsx)("div",{className:"donebutton",children:(0,S.jsx)(j.A,{variant:"contained",onClick:Yi,children:"Done"})})]}),Di.profession&&(0,S.jsx)(l.A,{color:"error",children:Di.profession})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Working With *"}),(0,S.jsxs)(v.A,{name:"workingWith",multiple:!0,value:Ke,onChange:rt(Ze,"pEmploymentTypeId"),input:(0,S.jsx)(H.A,{}),renderValue:e=>{if(e.includes(0))return"Open For All";return Qe.filter((i=>e.includes(i.id))).map((e=>e.name)).join(", ")},size:"small",open:ei,onClose:Gi,onOpen:()=>_i("workingWith"),children:[(0,S.jsxs)(g.A,{value:0,children:[(0,S.jsx)(U.A,{checked:Ke.includes(0)})," Open For All"]}),Qe.map((e=>(0,S.jsxs)(g.A,{value:e.id,children:[(0,S.jsx)(U.A,{checked:Ke.indexOf(e.id)>-1}),e.name]},e.id))),(0,S.jsx)("div",{className:"donebutton",children:(0,S.jsx)(j.A,{variant:"contained",onClick:Yi,children:"Done"})})]}),Di.workingWith&&(0,S.jsx)(l.A,{color:"error",children:Di.workingWith})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Annual Income *"}),(0,S.jsxs)(v.A,{name:"annualIncome",multiple:!0,value:ti,onChange:rt(ni,"pAnnualIncomeId"),input:(0,S.jsx)(H.A,{}),renderValue:e=>{if(e.includes(0))return"Open For All";return si.filter((i=>e.includes(i.id))).map((e=>e.value)).join(", ")},size:"small",open:oi,onClose:Gi,onOpen:()=>_i("annualIncome"),children:[(0,S.jsxs)(g.A,{value:0,children:[(0,S.jsx)(U.A,{checked:ti.includes(0)})," Open For All"]}),si.map((e=>(0,S.jsxs)(g.A,{value:e.id,children:[(0,S.jsx)(U.A,{checked:ti.indexOf(e.id)>-1}),e.value]},e.id))),(0,S.jsx)("div",{className:"donebutton",children:(0,S.jsx)(j.A,{variant:"contained",onClick:Yi,children:"Done"})})]}),Di.annualIncome&&(0,S.jsx)(l.A,{color:"error",children:Di.annualIncome})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(l.A,{variant:"h3",children:"Other Details"})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Diet *"}),(0,S.jsxs)(v.A,{name:"diet",multiple:!0,value:hi,onChange:rt(mi,"pDietId"),size:"small",input:(0,S.jsx)(H.A,{}),renderValue:e=>{if(e.includes(0))return"Open For All";return c.dietTypeList.filter((i=>e.includes(i.id))).map((e=>e.name)).join(", ")},open:pi,onClose:Gi,onOpen:()=>_i("diet"),children:[(0,S.jsxs)(g.A,{value:0,children:[(0,S.jsx)(U.A,{checked:hi.includes(0)})," Open For All"]}),c.dietTypeList.map((e=>(0,S.jsxs)(g.A,{value:e.id,children:[(0,S.jsx)(U.A,{checked:hi.indexOf(e.id)>-1}),e.name]},e.id))),(0,S.jsx)("div",{className:"donebutton",children:(0,S.jsx)(j.A,{variant:"contained",onClick:Yi,children:"Done"})})]}),Di.diet&&(0,S.jsx)(l.A,{color:"error",children:Di.diet})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Smoking Acceptance *"}),(0,S.jsxs)(L.A,{name:"smokingAcceptance",value:oe,onChange:Ki(ae,"pSmokingAcceptance"),row:!0,children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Yes"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"No"}),(0,S.jsx)(O.A,{value:0,control:(0,S.jsx)(B.A,{}),label:"Doesn't matter"})]}),Di.smokingAcceptance&&(0,S.jsx)(l.A,{color:"error",children:Di.smokingAcceptance})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Alcohol Acceptance *"}),(0,S.jsxs)(L.A,{name:"alcoholAcceptance",value:le,onChange:Ki(de,"pAlcoholAcceptance"),row:!0,children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Yes"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"No"}),(0,S.jsx)(O.A,{value:0,control:(0,S.jsx)(B.A,{}),label:"Doesn't matter"})]}),Di.alcoholAcceptance&&(0,S.jsx)(l.A,{color:"error",children:Di.alcoholAcceptance})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Disability Acceptance *"}),(0,S.jsxs)(L.A,{name:"disabilityAcceptance",value:ce,onChange:Ki(ue,"pDisabilityAcceptance"),row:!0,children:[(0,S.jsx)(O.A,{value:1,control:(0,S.jsx)(B.A,{}),label:"Yes"}),(0,S.jsx)(O.A,{value:2,control:(0,S.jsx)(B.A,{}),label:"No"}),(0,S.jsx)(O.A,{value:0,control:(0,S.jsx)(B.A,{}),label:"Doesn't matter"})]}),Di.disabilityAcceptance&&(0,S.jsx)(l.A,{color:"error",children:Di.disabilityAcceptance})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Complexion *"}),(0,S.jsxs)(v.A,{name:"complexion",multiple:!0,value:Ai,onChange:ot(vi,"pComplexion"),input:(0,S.jsx)(H.A,{}),renderValue:e=>e.includes("0")?"Open For All":e.join(", "),size:"small",open:gi,onClose:Gi,onOpen:()=>_i("complexion"),children:[(0,S.jsxs)(g.A,{value:"0",children:[(0,S.jsx)(U.A,{checked:Ai.includes("0")})," Open For All"]}),c.complexionList.map((e=>(0,S.jsxs)(g.A,{value:e.name,children:[(0,S.jsx)(U.A,{checked:Ai.indexOf(e.name)>-1}),e.name]},e.id))),(0,S.jsx)("div",{className:"donebutton",children:(0,S.jsx)(j.A,{variant:"contained",onClick:Yi,children:"Done"})})]}),Di.complexion&&(0,S.jsx)(l.A,{color:"error",children:Di.complexion})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:6,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Body Type *"}),(0,S.jsxs)(v.A,{name:"bodyType",multiple:!0,value:yi,onChange:ot(fi,"pBodyType"),input:(0,S.jsx)(H.A,{}),size:"small",renderValue:e=>Array.isArray(e)&&e.includes("0")?"Open For All":Array.isArray(e)?e.join(", "):"",open:Si,onClose:Gi,onOpen:()=>_i("bodyType"),children:[(0,S.jsxs)(g.A,{value:"0",children:[(0,S.jsx)(U.A,{checked:yi.includes("0")})," Open For All"]}),c.bodyTypesList.map((e=>(0,S.jsxs)(g.A,{value:e.name,children:[(0,S.jsx)(U.A,{checked:yi.indexOf(e.name)>-1}),e.name]},e.id))),(0,S.jsx)("div",{className:"donebutton",children:(0,S.jsx)(j.A,{variant:"contained",onClick:Yi,children:"Done"})})]}),Di.bodyType&&(0,S.jsx)(l.A,{color:"error",children:Di.bodyType})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsxs)(m.A,{fullWidth:!0,children:[(0,S.jsx)(p.A,{children:"Any Other Expectation *"}),(0,S.jsx)(T.A,{name:"expectation",value:bi,onChange:e=>{Ci(e.target.value);const i=e.target.value;Ei((e=>({...e,expectation:""}))),x((e=>({...e,pOtherExpectations:i})))},placeholder:"Enter any expectations",size:"small"}),Di.expectation&&(0,S.jsx)(l.A,{color:"error",children:Di.expectation})]})}),ki&&(0,S.jsx)(l.A,{color:"success",children:ki}),Ni&&(0,S.jsx)(l.A,{color:"error",children:Ni})]})}),(0,S.jsxs)(s.A,{className:"navigation-buttons",children:[(0,S.jsx)(j.A,{variant:"contained",onClick:a,children:"Back"}),(0,S.jsx)(j.A,{variant:"contained",onClick:"1"==Ji.isDemoUser?d:async()=>{if((()=>{let e=!0;const i={};return 0===k.length&&(i.martialStatus="Marital status is required",e=!1),E||(i.profileWithChildren="Profile with children is required",e=!1),z||(i.preferredLivingStatus="Preferred living status is required",e=!1),0===F.length&&(i.religion="At least one religion must be selected",e=!1),0===_.length&&(i.caste="At least one caste must be selected",e=!1),te||(i.horoscopeBelief="Horoscope belief is required",e=!1),se||(i.manglikBelief="Manglik belief is required",e=!1),oe||(i.smokingAcceptance="Smoking acceptance is required",e=!1),le||(i.alcoholAcceptance="Alcohol acceptance is required",e=!1),ce||(i.disabilityAcceptance="Disability acceptance is required",e=!1),0===he.length&&(i.country="At least one country must be selected",e=!1),0===ge.length&&(i.state="At least one state must be selected",e=!1),0===Mi.length&&(i.city="At least one city must be selected",e=!1),0===Le.length&&(i.qualification="At least one qualification must be selected",e=!1),0===Me.length&&(i.educationMedium="At least one educationMedium must be selected",e=!1),0===Ve.length&&(i.profession="At least one profession must be selected",e=!1),0===Ke.length&&(i.workingWith="At least one workingWith must be selected",e=!1),0===ti.length&&(i.annualIncome="At least one annualIncome must be selected",e=!1),0===ci.length&&(i.selectedLanguages="Language is required",e=!1),0===hi.length&&(i.diet="Diet preference is required",e=!1),0===Ai.length&&(i.complexion="Complexion is required",e=!1),0===yi.length&&(i.bodyType="Body type is required",e=!1),0===bi.length&&(i.expectation="Expection is required",e=!1),Ei(i),e})())try{const e=localStorage.getItem("newToken"),i=localStorage.getItem("rtoken"),t=localStorage.getItem("newToken"),n={id:Vi,pFromAge:A[0],pToAge:A[1],pFromHeight:I[0],pToHeight:I[1],pMaritalStatusId:h.pMaritalStatusId.join(","),pProfileWithChildren:h.pProfileWithChildren,pFamilyType:h.pFamilyType,pReligionId:h.pReligionId.join(","),pCommunityId:h.pCommunityId.join(","),pMotherTongue:h.pMotherTongue.join(","),pHoroscopeBelief:h.pHoroscopeBelief,pManglikMatch:h.pManglikMatch,pCountryLivingInId:h.pCountryLivingInId.join(","),pStateLivingInId:h.pStateLivingInId.join(","),pCityLivingInId:h.pCityLivingInId.join(","),pEducationTypeId:h.pEducationTypeId.join(","),pEducationMediumId:h.pEducationMediumId.join(","),pOccupationId:h.pOccupationId.join(","),pEmploymentTypeId:h.pEmploymentTypeId.join(","),pAnnualIncomeId:h.pAnnualIncomeId.join(","),pDietId:h.pDietId.join(","),pSmokingAcceptance:h.pSmokingAcceptance,pAlcoholAcceptance:h.pAlcoholAcceptance,pDisabilityAcceptance:h.pDisabilityAcceptance,pComplexion:h.pComplexion.join(","),pBodyType:h.pBodyType.join(","),pOtherExpectations:h.pOtherExpectations,screenNumber:10,token:t,...t?{}:{userId:Vi}},s=await fetch("/api/admin/users/completeUserProfileV2",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`MatrimonyAndroid|Bearer ${e}`,refreshtoken:`${i}`},body:JSON.stringify(n)}),r=await s.json();s.ok?(console.log("Data submitted successfully:",r),d()):(console.error("Error submitting data:",r),wi(r.message||"Error submitting data"))}catch(e){console.error("Error in handleNext:",e),wi(e.message||"An error occurred while submitting the data.")}else{const e=document.querySelector(".error-message");e&&e.scrollIntoView({behavior:"smooth"})}},children:"Next"})]})]})]})},X=e=>{var i,t,o;let{title:a,progressBarLength:d,onBack:c,onNext:u,currentStepId:h,userInfo:m,setUserInfo:x}=e;const[A,v]=(0,n.useState)((null===m||void 0===m||null===(i=m.documents[0])||void 0===i?void 0:i.documentUrl)||null),[g,y]=(0,n.useState)((null===m||void 0===m||null===(t=m.documents[1])||void 0===t?void 0:t.documentUrl)||null),{showSnackBar:I,SnackbarComponent:C}=(0,f.d)(),[k,T]=(0,n.useState)(null),[N,w]=(0,n.useState)(null),D=(null===(o=a.find((e=>e.id===h)))||void 0===o?void 0:o.name)||"",E=(e,i)=>(e,t)=>{var n;const s=null===(n=e.target.files)||void 0===n?void 0:n[0];if(s){const e=new FileReader;e.onloadend=()=>{t(e.result),i(null)},e.readAsDataURL(s)}};let L=JSON.parse(localStorage.getItem("Credentials"));return(0,n.useEffect)((()=>{null!==L&&void 0!==L&&L.isDemoUser&&I("**Access Denied**\nWe're sorry, but you do not have permission to access this feature.")}),[]),(0,S.jsxs)(s.A,{children:[L.isDemoUser>0&&(0,S.jsx)(C,{}),(0,S.jsxs)(b.A,{className:"container",children:[(0,S.jsx)(l.A,{variant:"h3",className:"title",children:D}),(0,S.jsx)(s.A,{className:"progress-bar-container",children:(0,S.jsx)(s.A,{className:"progress-bar",style:{width:d}})}),(0,S.jsxs)(r.Ay,{container:!0,spacing:2,children:[(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(l.A,{variant:"h2",children:"Documents"})}),(0,S.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,S.jsx)(p.A,{children:"Aadhar Card *"}),(0,S.jsxs)(s.A,{className:"image-upload-box",onClick:()=>{var e;return null===(e=document.getElementById("aadhar-upload"))||void 0===e?void 0:e.click()},sx:{border:"1px dashed #ccc",padding:"16px",textAlign:"center",cursor:"pointer",height:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:[A?(0,S.jsx)("img",{src:A,alt:"Aadhar Preview",style:{maxHeight:"100%",maxWidth:"100%"}}):(0,S.jsx)(l.A,{children:"Click to Upload Aadhar Card"}),(0,S.jsx)("input",{type:"file",id:"aadhar-upload",style:{display:"none"},onChange:e=>E(0,T)(e,v)})]}),k&&(0,S.jsx)(l.A,{color:"error",variant:"body2",children:k})]}),(0,S.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,S.jsx)(p.A,{children:"Voter ID *"}),(0,S.jsxs)(s.A,{className:"image-upload-box",onClick:()=>{var e;return null===(e=document.getElementById("voter-upload"))||void 0===e?void 0:e.click()},sx:{border:"1px dashed #ccc",padding:"16px",textAlign:"center",cursor:"pointer",height:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:[g?(0,S.jsx)("img",{src:g,alt:"Voter ID Preview",style:{maxHeight:"100%",maxWidth:"100%"}}):(0,S.jsx)(l.A,{children:"Click to Upload Voter ID"}),(0,S.jsx)("input",{type:"file",id:"voter-upload",style:{display:"none"},onChange:e=>E(0,w)(e,y)})]}),N&&(0,S.jsx)(l.A,{color:"error",variant:"body2",children:N})]})]}),(0,S.jsxs)(s.A,{className:"navigation-buttons",children:[(0,S.jsx)(j.A,{variant:"contained",onClick:c,children:"Back"}),(0,S.jsx)(j.A,{variant:"contained",onClick:"1"==L.isDemoUser?u:async()=>{T(null),w(null);try{const s=localStorage.getItem("userId");if(!s)return void console.error("User ID is missing.");if(!A)return void T("Aadhar card is required.");if(!g)return void w("Voter ID is required.");let r,o;var e,i,t,n;if(Array.isArray(null===m||void 0===m?void 0:m.documents))r=null===m||void 0===m||null===(e=m.documents)||void 0===e||null===(i=e.find((e=>1===(null===e||void 0===e?void 0:e.documentTypeId))))||void 0===i?void 0:i.id,o=null===m||void 0===m||null===(t=m.documents)||void 0===t||null===(n=t.find((e=>2===(null===e||void 0===e?void 0:e.documentTypeId))))||void 0===n?void 0:n.id;const a=[{documentTypeId:1,documentUrl:A,isRequired:1,id:r},{documentTypeId:2,documentUrl:g,isRequired:1,id:o}],l=localStorage.getItem("newToken"),d=await fetch("/api/admin/users/completeUserProfileV2",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("newToken")}`},body:JSON.stringify({id:s,screenNumber:11,documents:a,token:l,...l?{}:{userId:s}})});if(200!==(null===d||void 0===d?void 0:d.status))throw new Error("Error in document submission");await d.json();u()}catch(s){console.error("Error in document submission:",s.message)}},children:"Submit"})]})]})]})};class ee{constructor(){this.id=void 0,this.stripeCustomerId=void 0,this.screenNumber=void 0,this.lastCompletedScreen=void 0,this.isProfileCompleted=void 0,this.gender=void 0,this.password=void 0,this.firstName=void 0,this.middleName=void 0,this.lastName=void 0,this.email=void 0,this.mobileNumber=void 0,this.dateOfBirth=void 0,this.isHideContactDetail=void 0,this.maritalStatus=void 0,this.maritalStatusId=void 0,this.haveChildren=void 0,this.noOfChildren=void 0,this.height=void 0,this.heightId=void 0,this.weightId=void 0,this.weight=void 0,this.haveSpecs=void 0,this.anyDisability=void 0,this.bloodGroup=void 0,this.complexion=void 0,this.bodyType=void 0,this.language=void 0,this.eyeColor=void 0,this.aboutMe=void 0,this.religionId=void 0,this.religion=void 0,this.communityId=void 0,this.community=void 0,this.subCommunityId=void 0,this.subCommunity=void 0,this.motherTongue=void 0,this.familyType=void 0,this.fatherDetails=void 0,this.motherDetails=void 0,this.familyDetail=void 0,this.permanentAddress=void 0,this.currentAddress=void 0,this.nativePlace=void 0,this.willingToGoAbroad=void 0,this.citizenship=void 0,this.visaStatus=void 0,this.educationTypeId=void 0,this.educationMediumId=void 0,this.educationMedium=void 0,this.educationId=void 0,this.education=void 0,this.areYouWorking=void 0,this.employmentTypeId=void 0,this.employmentType=void 0,this.occupationId=void 0,this.occupation=void 0,this.designation=void 0,this.companyName=void 0,this.businessName=void 0,this.annualIncomeId=void 0,this.annualIncome=void 0,this.horoscopeBelief=void 0,this.birthCountryId=void 0,this.birthCityId=void 0,this.birthCountryName=void 0,this.birthCityName=void 0,this.zodiacSign=void 0,this.manglik=void 0,this.timeOfBirth=void 0,this.isHideBirthTime=void 0,this.dietId=void 0,this.diet=void 0,this.smoking=void 0,this.drinking=void 0,this.pFromAge=void 0,this.pToAge=void 0,this.pFromHeight=void 0,this.pToHeight=void 0,this.pMaritalStatusId=void 0,this.pProfileWithChildren=void 0,this.pFamilyType=void 0,this.pReligionId=void 0,this.pCommunityId=void 0,this.pMotherTongue=void 0,this.pHoroscopeBelief=void 0,this.pManglikMatch=void 0,this.pCountryLivingInId=void 0,this.pStateLivingInId=void 0,this.pCityLivingInId=void 0,this.pEducationTypeId=void 0,this.pEducationMediumId=void 0,this.pOccupationId=void 0,this.pEmploymentTypeId=void 0,this.pAnnualIncomeId=void 0,this.pDietId=void 0,this.pSmokingAcceptance=void 0,this.pAlcoholAcceptance=void 0,this.pDisabilityAcceptance=void 0,this.pComplexion=void 0,this.pBodyType=void 0,this.pOtherExpectations=void 0,this.documents=void 0,this.customFields=void 0,this.profileCompletedPercentage=void 0,this.pCountries=void 0,this.pReligions=void 0,this.pCommunities=void 0,this.pStates=void 0,this.pEducationMedium=void 0,this.pOccupation=void 0,this.pEmploymentType=void 0,this.pAnnualIncome=void 0,this.pEducationType=void 0,this.pCities=void 0,this.pMaritalStatus=void 0,this.pDiet=void 0,this.flag=void 0,this.countryCode=void 0,this.age=void 0,this.imageUrl=void 0,this.token=void 0,this.refreshToken=void 0,this.userWalletAmount=void 0,this.oAuthUserId=void 0,this.oAuthUserName=void 0,this.oAuthUserPicUrl=void 0,this.oAuthAccessToken=void 0,this.description=void 0,this.oAuthProviderName=void 0,this.userPackage=void 0,this.isAppleLogin=void 0,this.isOAuth=void 0,this.latitude=void 0,this.longitude=void 0,this.masterEntryData=void 0,this.expectation=void 0,this.userFlags=void 0,this.isVerifiedProfile=void 0,this.isFavourite=void 0,this.totalView=void 0,this.matchingPercentage=void 0,this.fcmtoken=void 0,this.profileForId=void 0,this.profileForName=void 0,this.addressLine1=void 0,this.addressLine2=void 0,this.isBlock=void 0,this.isVerifyProfilePic=void 0,this.isProposed=void 0,this.hasCancelled=void 0,this.proposalStatus=void 0,this.isProposalSent=void 0,this.isProposalReceived=void 0,this.memberId=void 0,this.familyDetail=[],this.documents=[],this.customFields=[],this.userFlags=[]}}var ie=t(47503),te=t(94786);const ne=()=>{const[e,i]=n.useState(0),[t,m]=(0,n.useState)(null),[p,x]=(0,n.useState)([]),A=(0,c.g)(),[v,g]=(0,n.useState)(new ee),[j,y]=(0,n.useState)(!0),{showSnackBar:b,SnackbarComponent:C}=(0,f.d)();console.info("mainUser--------------------afetr edit click---\x3e",v),(0,n.useEffect)((()=>{v&&localStorage.setItem("userInfo",JSON.stringify(v))}),[v]),(0,n.useEffect)((()=>{localStorage.setItem("activeTab",e.toString())}),[e]),(0,n.useEffect)((()=>{if(v){const e=localStorage.getItem("userInfo");e&&g(JSON.parse(e))}}),[]),(0,n.useEffect)((()=>{localStorage.removeItem("userId"),localStorage.removeItem("newToken"),localStorage.removeItem("rtoken"),localStorage.removeItem("isSignedUp")}),[]),console.log("userInfo---------\x3e",v),(0,n.useEffect)((()=>{const e=localStorage.getItem("activeTab");e&&i(parseInt(e,10))}),[]),(0,n.useEffect)((()=>{fetch("/api/admin/addAppUserRoutes/getVariables").then((e=>e.json())).then((e=>{e.success?m(e.data):console.error("Failed to fetch configuration data")})).catch((e=>{console.error("Error fetching configuration data:",e)}))}),[]);(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token"),i=await fetch("/api/app/users/getMasterData",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error("Network response was not ok");const t=await i.json();console.log("Fetched data:",t),t&&t.recordList?x(t.recordList.registrationScreens||[]):console.error("Unexpected data format:",t)}catch(e){console.error("Error fetching data:",e)}})(),(async()=>{try{y(!0),localStorage.setItem("userId",A.id);const e=localStorage.getItem("SessionToken"),i=localStorage.getItem("RefreshToken");let t={userId:A.id};const n=await D.A.httpPost("/api/admin/appUsers/viewAppUserPerDetail",t,e,i);if(n&&n.recordList&&n.recordList.userDetail&&n.recordList.userDetail[0]){const e=n.recordList.userDetail[0];console.log("Details",e,null===e||void 0===e?void 0:e.userDocuments);const i="string"===typeof e.languages?e.languages.split(",").map((e=>e.trim())):e.languages||[],t="string"===typeof e.pMotherTongue?e.pMotherTongue.split(",").map((e=>e.trim())):e.pMotherTongue||[];g((n=>({...n,profileForId:e.profileForId||n.profileForId,gender:e.gender||n.gender,imageUrl:(null===e||void 0===e?void 0:e.imageUrl)||(null===n||void 0===n?void 0:n.imageUrl),firstName:e.firstName||n.firstName,middleName:e.middleName||n.middleName,lastName:e.lastName||n.lastName,email:e.email||n.email,mobileNumber:e.contactNo.slice(-10)||n.mobileNumber.slice(-10),dateOfBirth:e.birthDate||n.dateOfBirth,maritalStatusId:e.maritalStatusId||n.maritalStatusId,haveChildren:e.haveChildren||n.haveChildren,noOfChildren:e.noOfChildren||n.noOfChildren,height:e.heightId||n.heightId,weight:e.weightId||n.weightId,haveSpecs:e.haveSpecs||n.haveSpecs,anyDisability:e.anyDisability||n.anyDisability,bloodGroup:e.bloodGroup||n.bloodGroup,complexion:e.complexion||n.complexion,bodyType:e.bodyType||n.bodyType,eyeColor:e.eyeColor||n.eyeColor,language:i,aboutMe:e.aboutMe||n.aboutMe,religion:e.religion||n.religion,community:e.community||n.community,subCommunity:e.subCommunity||n.subCommunity,motherTongue:e.motherTongue||n.motherTongue,familyType:e.familyType||n.familyType,fatherDetails:e.fatherDetails||n.fatherDetails,motherDetails:e.motherDetails||n.motherDetails,familyDetail:e.familyDetail||n.familyDetail,documents:(null===e||void 0===e?void 0:e.userDocuments)||null,permanentAddress:e.permanentAddress||n.permanentAddress,currentAddress:e.currentAddress||n.currentAddress,nativePlace:e.nativePlace||n.nativePlace,citizenship:e.citizenship||n.citizenship,willingToGoAbroad:e.willingToGoAbroad||n.willingToGoAbroad,visaStatus:e.visaStatus||n.visaStatus,educationMediumId:e.educationMedium||n.educationMediumId,educationTypeId:e.educationType||n.educationTypeId,educationId:e.educationId||n.educationId,areYouWorking:e.areYouWorking||n.areYouWorking,occupationId:e.occupationId||n.occupationId,designation:e.designation||n.designation,employmentTypeId:e.employmentTypeId||n.employmentTypeId,companyName:e.companyName||n.companyName,businessName:e.businessName||n.businessName,annualIncome:e.annualIncomeId||n.annualIncome,horoscopeBelief:e.horoscopeBelief||n.horoscopeBelief,birthCountryId:e.birthCountryId||n.birthCountryId,birthCityId:e.birthCityId||n.birthCityId,zodiacSign:e.zodiacSign||n.zodiacSign,timeOfBirth:e.timeOfBirth||n.timeOfBirth,manglik:e.manglik||n.manglik,diet:e.diet||n.diet,smoking:e.smoking||n.smoking,drinking:e.drinking||n.drinking,pMaritalStatusId:e.pMaritalStatusId||n.pMaritalStatusId,pProfileWithChildren:e.pProfileWithChildren||n.pProfileWithChildren,pFamilyType:e.pFamilyType||n.pFamilyType,pReligionId:e.pReligionId||n.pReligionId,pCommunityId:e.pCommunityId||n.pCommunityId,pMotherTongue:t,pHoroscopeBelief:e.pHoroscopeBelief||n.pHoroscopeBelief,pManglikMatch:e.pManglikMatch||n.pManglikMatch,pCountryLivingInId:e.pCountryLivingInId||n.pCountryLivingInId,pStateLivingInId:e.pStateLivingInId||n.pStateLivingInId,pCityLivingInId:e.pCityLivingInId||n.pCityLivingInId,pEducationMediumId:e.pEducationMediumId||n.pEducationMediumId,pOccupationId:e.pOccupationId||n.pOccupationId,pEmploymentTypeId:e.pEmploymentTypeId||n.pEmploymentTypeId,pAnnualIncomeId:e.pAnnualIncomeId||n.pAnnualIncomeId,pDietId:e.pDietId||n.pDietId,pSmokingAcceptance:e.pSmokingAcceptance||n.pSmokingAcceptance,pAlcoholAcceptance:e.pAlcoholAcceptance||n.pAlcoholAcceptance,pDisabilityAcceptance:e.pDisabilityAcceptance||n.pDisabilityAcceptance,pComplexion:e.pComplexion||n.pComplexion,pBodyType:e.pBodyType||n.pBodyType,pOtherExpectations:e.pOtherExpectations||n.pOtherExpectations,pEducationTypeId:e.pEducationTypeId||n.pEducationTypeId})))}}catch(e){ie.oR.error(e,{autoClose:6e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",position:ie.oR.POSITION.TOP_RIGHT})}finally{y(!1)}})()}),[]);const k=()=>{e<10?i((e=>e+1)):T()},T=()=>{console.log("Final form submission"),localStorage.removeItem("userInfo"),localStorage.removeItem("activeTab"),localStorage.removeItem("profileForId"),localStorage.removeItem("gender"),localStorage.removeItem("userId"),localStorage.removeItem("newToken"),localStorage.removeItem("rtoken"),window.location.href="/admin/appuser"},N=()=>{e>0&&i((e=>e-1))};return(0,S.jsxs)(s.A,{children:[(0,S.jsx)(h.A,{children:(0,S.jsx)(s.A,{py:1.9,pl:1,children:(0,S.jsx)(r.Ay,{container:!0,justifyContent:"space-between",alignItems:"center",children:(0,S.jsx)(r.Ay,{item:!0,children:(0,S.jsx)(o.A,{alignItems:"left",justifyContent:"space-between",children:(0,S.jsxs)(a.A,{"aria-label":"breadcrumb",children:[(0,S.jsx)(u.N_,{to:"/admin/dashboard",style:{display:"flex",color:"black"},children:(0,S.jsx)(d.A,{})}),(0,S.jsx)(u.N_,{to:"/admin/appuser",style:{display:"flex",color:"black",textDecoration:"none"},children:"App Users"}),null!==A&&void 0!==A&&A.id?(0,S.jsx)(l.A,{children:"Edit User"}):(0,S.jsx)(l.A,{children:"Add User"})]})})})})})}),(0,S.jsx)(s.A,{sx:{width:"100%"},children:j?(0,S.jsx)(te.A,{title:"Loading..."}):(0,S.jsxs)(S.Fragment,{children:[0===e&&t&&(0,S.jsx)(I,{title:p,progressBarLength:"9%",onNext:k,configData:t,currentStepId:1,userInfo:v,setUserInfo:g}),1===e&&t&&(0,S.jsx)(E,{title:p,progressBarLength:"18%",onBack:N,onNext:k,currentStepId:2,userInfo:v,setUserInfo:g}),2===e&&t&&(0,S.jsx)(W,{title:p,progressBarLength:"27%",onBack:N,onNext:k,configData:t,currentStepId:3,userInfo:v,setUserInfo:g}),3===e&&t&&(0,S.jsx)(z,{title:p,progressBarLength:"36%",onBack:N,onNext:k,configData:t,currentStepId:4,userInfo:v,setUserInfo:g}),4===e&&t&&(0,S.jsx)(M,{title:p,progressBarLength:"45%",onBack:N,onNext:k,configData:t,currentStepId:5,userInfo:v,setUserInfo:g}),5===e&&t&&(0,S.jsx)(q,{title:p,progressBarLength:"54%",onBack:N,onNext:k,configData:t,currentStepId:6,userInfo:v,setUserInfo:g}),6===e&&t&&(0,S.jsx)($,{title:p,progressBarLength:"63%",onBack:N,onNext:k,currentStepId:7,userInfo:v,setUserInfo:g}),7===e&&t&&(0,S.jsx)(_,{title:p,progressBarLength:"72%",onBack:N,onNext:k,configData:t,currentStepId:8,userInfo:v,setUserInfo:g}),8===e&&t&&(0,S.jsx)(G,{title:p,progressBarLength:"81%",onBack:N,onNext:k,configData:t,currentStepId:9,userInfo:v,setUserInfo:g}),9===e&&t&&(0,S.jsx)(Q,{title:p,progressBarLength:"90%",onBack:N,onNext:k,configData:t,currentStepId:10,userInfo:v,setUserInfo:g}),10===e&&t&&(0,S.jsx)(X,{title:p,progressBarLength:"100%",onBack:N,onNext:k,currentStepId:11,userInfo:v,setUserInfo:g})]})})]})}}}]);
//# sourceMappingURL=6940.cc089570.chunk.js.map